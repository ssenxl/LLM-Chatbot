import pandas as pd
import chromadb
import difflib
from sentence_transformers import SentenceTransformer
from formatter import format_answer
from logger import log_interaction

# =========================
# CONFIG
# =========================
EXCEL_PATH = "data/it_faq.xlsx"
RAG_THRESHOLD = 0.35

# =========================
# GLOBAL CONTEXT
# =========================
current_topic = None   # None | erp_main | selling_root | pr | po

# =========================
# ERP INTENT MAP
# =========================
ERP_PR_INTENT = {
    "1": "erp_pr_create",
    "2": "erp_pr_edit",
    "3": "erp_pr_cancel",
}

ERP_PO_INTENT = {
    "1": "erp_po_create",
    "1.1": "erp_po_create_split_delivery",
    "1.2": "erp_po_create‡∏¢‡πâ‡∏≠‡∏ô‡∏´‡∏•‡∏±‡∏á",
    "2": "erp_po_edit",
    "2.1": "erp_po_edit_payment_term",
    "3": "erp_po_cancel",
    "4": "erp_po_reject_add_item",
    "5": "erp_po_compare_price",
    "6": "erp_po_with_attachment",
    "7": "erp_po_close",
}
ERP_BOM_INTENT= {
    "1": "bom_create",
    "2": "bom_edit",
    "3": "bom_add_material",
    "4": "bom_qty_parent",
    "5": "bom_approve",
    "6": "bom_check_status",
    "7": "bom_revision_required",
    "8": "bom_not_approved_issue",
}
ERP_cost_rollup_INTENT = {
    "1": "rollup_cost_run",
    "2": "rollup_cost_check_result",
    "3": "standard_cost_check",
    "4": "rollup_cost_issue",
    "5": "rollup_cost_prerequisite",
}
ERP_standard_cost_INTENT = {
    "1": "standard_cost_check",
    "2": "standard_cost_detail",
    "3": "standard_cost_compare",
    "4": "standard_cost_loaded_check",
    "5": "standard_cost_issue",
    "6": "standard_cost_relation",
    "7": "standard_cost_next_step",
}
ERP_adjust_cost_INTENT = {
    "1": "cost_adjustment_product",
    "2": "cost_adjustment_material",
    "3": "cost_adjustment_stock_impact",
    "4": "cost_adjustment_history",
    "5": "cost_adjustment_issue",
    "6": "cost_adjustment_not_change",
}
ERP_price_list_INTENT = {
    "1": "price_list_create",
    "2": "price_list_add_part",
    "3": "price_list_edit",
    "4": "price_list_check_customer",
    "5": "price_list_check_status",
    "6": "price_list_export",
    "7": "price_list_issue",
}
ERP_bom_check_status_INTENT = {
    "1": "bom_check_status",
    "2": "bom_check_approved",
    "3": "bom_check_pending",
    "4": "bom_check_rejected",
    "5": "bom_check_revision",
}
ERP_proforma_invoice_INTENT = {
    "1": "finance_pi_check",
    "2": "finance_pi_approve",
    "3": "finance_pi_reject",
    "4": "finance_pi_status",
    "5": "finance_pi_issue",
}
ERP_sales_order_INTENT = {
    "1": "erp_so_create",
    "2": "erp_so_edit",
    "3": "erp_so_status",
    "4": "erp_so_cancel",
    "5": "erp_so_common_issue",
}
ERP_rma_INTENT = {
    "1": "sales_rma_create",
    "2": "sales_rma_approve",
    "3": "sales_rma_status",
    "4": "sales_rma_receive_stock",
    "5": "sales_rma_close",
    "6": "sales_rma_cancel",
}

ERP_customer_complaint_INTENT = {
    "1": "sales_complaint_create",
    "2": "sales_complaint_edit",
    "3": "sales_complaint_submit",
    "4": "sales_complaint_status",
    "5": "sales_complaint_action",
    "6": "sales_complaint_close",
    "7": "sales_complaint_cancel",
}
ERP_uom_setup_INTENT = {
    "1": "it_uom_class_create",
    "2": "it_uom_create",
}
ERP_part_setup_INTENT = {
    "1": "it_part_create",
    "2": "it_part_class_setup",
}
ERP_customer_setup_INTENT = {
    "1": "it_customer_create",
    "2": "it_customer_edit",
}
ERP_supplier_setup_INTENT = {
    "1": "it_supplier_create",
    "2": "it_supplier_group_create",
    "3": "it_supplier_pricelist_setup",
}
ERP_it_purchasing_terms_setup = {
    "1": "it_buyer_create",
    "2": "it_shipvia_setup",
    "3": "it_purchasing_terms_setup",
    "4": "it_incoterm_setup",
}
ERP_user_security_INTENT = {
    "1": "it_user_create",
    "2": "it_user_permission",
}
ERP_hr_material_requisition_INTENT = {
    "1": "hr_issue_material",
    "2": "hr_return_material",
}
ERP_hr_item_stock_check_INTENT = {
    "1": "hr_check_item",
    "2": "hr_check_stock",
}
ERP_hr_transfer_status_INTENT = {
    "1": "hr_transfer_item",
}
ERP_finance_ar_customer_setup_INTENT = {
    "1": "acc_ar_writeoff_adjust",
    "2": "acc_ar_status_check",
}
ERP_finance_ap_supplier_setup_INTENT = {
    "1": "acc_ap_prepaid_create",
    "2": "acc_ap_deposit_create",
    "3": "acc_ap_credit_note_create",
    "4": "acc_ap_billing_create",
}
ERP_finance_bank_management_INTENT = {
    "1": "acc_bank_adjustment",
    "2": "acc_bank_transfer",
    "3": "acc_bank_reconciliation",
}
ERP_finance_vat_setup_INTENT = {
    "1": "acc_tax_purchase_report",
    "2": "acc_tax_reverse_input_vat",
    "3": "acc_tax_status_check",
}
ERP_finance_general_ledger_gl_INTENT = {
    "1": "acc_gl_entry",
    "2": "acc_gl_currency_revaluation",
    "3": "acc_gl_status_check",
}
ERP_finance_journal_entry_INTENT = {
    "1": "acc_journal_create",
    "2": "acc_journal_reverse_vat",
    "3": "acc_journal_post_check",
}
ERP_Warehouse_Delivery_ROOT_INTENT = {
    "1": "wh_stock_count",
    "2": "wh_stock_count_record",
    "3": "wh_stock_adjust_from_count",
    "4": "wh_goods_receipt",
    "5": "wh_goods_receipt_check",
    "6": "wh_credit_memo",
    "7": "wh_document_status",
}
# =========================
# LOAD EXCEL
# =========================
documents, answers, intents = [], [], []

xlsx = pd.ExcelFile(EXCEL_PATH)
for sheet in xlsx.sheet_names:
    df = pd.read_excel(xlsx, sheet_name=sheet)
    df.columns = df.columns.str.strip().str.lower()

    if not {"intent", "question", "answer"}.issubset(df.columns):
        continue

    for _, row in df.iterrows():
        if pd.isna(row["question"]) or pd.isna(row["answer"]):
            continue

        intent = str(row["intent"]).strip()
        answer = str(row["answer"]).strip()

        for q in str(row["question"]).split(","):
            q = q.strip().lower()
            if q:
                documents.append(q)
                answers.append(answer)
                intents.append(intent)

# =========================
# VECTOR DB
# =========================
model = SentenceTransformer("paraphrase-multilingual-MiniLM-L12-v2")
client = chromadb.Client()
collection = client.create_collection("it_faq")

collection.add(
    documents=documents,
    embeddings=model.encode(documents).tolist(),
    metadatas=[{"answer": a, "intent": i} for a, i in zip(answers, intents)],
    ids=[str(i) for i in range(len(documents))]
)

# =========================
# HELPERS
# =========================
def fuzzy(a, b, cutoff=0.75):
    return difflib.SequenceMatcher(None, a, b).ratio() >= cutoff

def get_answer_by_intent(intent_name):
    for i, a in zip(intents, answers):
        if i == intent_name:
            return a
    return None

def is_erp_related(q: str) -> bool:
    keywords = [
        "pr", "po","bom","purchase", "purchasing", "procurement","‡∏à‡∏±‡∏î‡∏ã‡∏∑‡πâ‡∏≠",
        "cost", "costing", "‡∏ï‡πâ‡∏ô‡∏ó‡∏∏‡∏ô","bill of material", "bill of materials", "bom","‡∏™‡∏π‡∏ï‡∏£‡∏Å‡∏≤‡∏£‡∏ú‡∏•‡∏¥‡∏ï","‡∏ß‡∏±‡∏™‡∏î‡∏∏","‡∏ß‡∏±‡∏ï‡∏ñ‡∏∏‡∏î‡∏¥‡∏ö","material","inventory","stock","price list","approve","‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥",
        "‡πÄ‡∏õ‡∏¥‡∏î", "‡∏™‡∏£‡πâ‡∏≤‡∏á", "‡πÅ‡∏Å‡πâ", "‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç","‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì","rollup cost","standard cost","‡∏õ‡∏£‡∏±‡∏ö","change","edit","modify","update","adjust","update","revise",
        "‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å", "cancel", "void","delete","remove","‡∏ù‡πà‡∏≤‡∏¢‡∏à‡∏±‡∏î‡∏ã‡∏∑‡πâ‡∏≠","purchase department","purchasing department","‡∏ù‡πà‡∏≤‡∏¢‡∏ï‡πâ‡∏ô‡∏ó‡∏∏‡∏ô","cost department",
        "‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å", "‡∏•‡∏ö", "‡∏ñ‡∏≠‡∏ô", "‡∏õ‡∏¥‡∏î", "‡∏à‡∏ö","‡πÄ‡∏°‡∏ô‡∏π","menu","‡πÄ‡∏°‡∏ô‡∏π‡∏ù‡πà‡∏≤‡∏¢‡∏à‡∏±‡∏î‡∏ã‡∏∑‡πâ‡∏≠","‡πÄ‡∏°‡∏ô‡∏π‡∏ù‡πà‡∏≤‡∏¢‡∏ï‡πâ‡∏ô‡∏ó‡∏∏‡∏ô",
        "‡∏´‡∏•‡∏≤‡∏¢‡∏á‡∏ß‡∏î", "‡πÅ‡∏ö‡πà‡∏á‡∏™‡πà‡∏á", "‡πÅ‡∏ö‡πà‡∏á‡πÄ‡∏Ç‡πâ‡∏≤",
        "‡πÄ‡∏û‡∏¥‡πà‡∏°", "‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô","‡∏õ‡∏£‡∏±‡∏ö",
        "‡πÄ‡∏Ñ‡∏£‡∏î‡∏¥‡∏ï", "‡∏à‡πà‡∏≤‡∏¢", "term",
        "‡∏¢‡πâ‡∏≠‡∏ô‡∏´‡∏•‡∏±‡∏á",
        "‡πÄ‡∏á‡∏∑‡πà‡∏≠‡∏ô‡πÑ‡∏Ç‡∏Å‡∏≤‡∏£‡∏ä‡∏≥‡∏£‡∏∞‡πÄ‡∏á‡∏¥‡∏ô","payment term",
        "‡πÅ‡∏ô‡∏ö", "‡πÑ‡∏ü‡∏•‡πå","‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£",
        "‡πÄ‡∏õ‡∏£‡∏µ‡∏¢‡∏ö‡πÄ‡∏ó‡∏µ‡∏¢‡∏ö‡∏£‡∏≤‡∏Ñ‡∏≤","‡πÄ‡∏ó‡∏µ‡∏¢‡∏ö",
        "‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞", "status", "‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞","‡∏î‡∏π‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞", "‡πÄ‡∏ä‡πá‡∏Ñ‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞","‡πÄ‡∏ä‡πá‡∏Ñ‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞ bom", "‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞ bom", "‡∏î‡∏π‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞ bom",
        "vat", "report", "‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô", "‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞",
        "‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì", "run", "execute", "start","launch","begin","calculate",
        "‡∏ú‡∏•", "result", "output","‡∏î‡∏π‡∏ú‡∏•","check result","view result",
        "‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö", "check","‡∏î‡∏π","view","status",
        "‡∏õ‡∏±‡∏ç‡∏´‡∏≤", "issue","problem","error","trouble","‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î",
        "‡πÄ‡∏á‡∏∑‡πà‡∏≠‡∏ô‡πÑ‡∏Ç", "prerequisite","condition","requirement","precondition",  
        "‡∏™‡∏π‡∏ï‡∏£‡∏Å‡∏≤‡∏£‡∏ú‡∏•‡∏¥‡∏ï", "bom","bill of material", "bill of materials",
        "‡∏™‡∏£‡πâ‡∏≤‡∏á", "‡πÄ‡∏õ‡∏¥‡∏î", "new", "create","make","build","add","‡∏ï‡∏±‡πâ‡∏á","‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤",
        "‡πÅ‡∏Å‡πâ", "‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç", "‡∏õ‡∏£‡∏±‡∏ö", "‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô", "edit","modify","change",
        "‡πÄ‡∏û‡∏¥‡πà‡∏°", "‡∏ß‡∏±‡∏ï‡∏ñ‡∏∏‡∏î‡∏¥‡∏ö", "material",
        "parent", "‡∏à‡∏≥‡∏ô‡∏ß‡∏ô", "qty", "quantity", "‡∏õ‡∏£‡∏±‡∏ö‡∏à‡∏≥‡∏ô‡∏ß‡∏ô", "‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏à‡∏≥‡∏ô‡∏ß‡∏ô", "‡πÅ‡∏Å‡πâ‡∏à‡∏≥‡∏ô‡∏ß‡∏ô",
        "approve", "‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥", "‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥‡πÅ‡∏•‡πâ‡∏ß", "‡∏ú‡πà‡∏≤‡∏ô", "‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥‡πÑ‡∏õ", "‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥‡πÄ‡∏™‡∏£‡πá‡∏à",
        "revision", "‡πÅ‡∏Å‡πâ‡πÄ‡∏û‡∏¥‡πà‡∏°", "‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡πÄ‡∏û‡∏¥‡πà‡∏°", "‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏°",  "‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡πÉ‡∏´‡∏°‡πà",
        "‡πÑ‡∏°‡πà‡∏ú‡πà‡∏≤‡∏ô", "reject", "issue", "‡∏õ‡∏±‡∏ç‡∏´‡∏≤", "‡πÑ‡∏°‡πà‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥",
        "erp", "‡πÄ‡∏°‡∏ô‡∏π erp", "erp menu","menu","‡πÄ‡∏°‡∏ô‡∏π",
        "‡∏ù‡πà‡∏≤‡∏¢‡∏à‡∏±‡∏î‡∏ã‡∏∑‡πâ‡∏≠","purchase", "‡∏à‡∏±‡∏î‡∏ã‡∏∑‡πâ‡∏≠", "purchasing",
        "‡∏ï‡πâ‡∏ô‡∏ó‡∏∏‡∏ô","cost", "costing","  ‡∏ù‡πà‡∏≤‡∏¢‡∏Ç‡∏≤‡∏¢","selling","sales",
        "‡∏ù‡πà‡∏≤‡∏¢‡∏Ñ‡∏•‡∏±‡∏á‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÅ‡∏•‡∏∞‡∏à‡∏±‡∏î‡∏™‡πà‡∏á","warehouse","inventory","stock","logistics",
        "‡∏ù‡πà‡∏≤‡∏¢‡πÄ‡∏ó‡∏Ñ‡πÇ‡∏ô‡πÇ‡∏•‡∏¢‡∏µ‡∏™‡∏≤‡∏£‡∏™‡∏ô‡πÄ‡∏ó‡∏®","it","information technology",
        "‡∏ù‡πà‡∏≤‡∏¢‡∏ö‡∏±‡∏ç‡∏ä‡∏µ‡πÅ‡∏•‡∏∞‡∏Å‡∏≤‡∏£‡πÄ‡∏á‡∏¥‡∏ô","accounting","finance",
        "‡∏ù‡πà‡∏≤‡∏¢‡∏ö‡∏∏‡∏Ñ‡∏Ñ‡∏•","hr","human resources","‡∏ï‡∏£‡∏ß‡∏à"
    ]
    return any(k in q for k in keywords)

# =========================
# ERP MENU HANDLER
# =========================
def handle_erp(q):
    global current_topic
    
    # ===== DIRECT SHORTCUT =====
    if q == "pr":
        current_topic = "pr"
        return (
            "‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡∏Ç‡∏≠‡∏á PR:\n"
            "1) ‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏Å‡∏≤‡∏£‡πÄ‡∏õ‡∏¥‡∏î PR\n"
            "2) ‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏Å‡∏≤‡∏£‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç PR\n"
            "3) ‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏Å‡∏≤‡∏£‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å PR\n\n"
            "üëâ ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏û‡∏¥‡∏°‡∏û‡πå‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏•‡∏Ç‡∏´‡∏£‡∏∑‡∏≠‡∏Ñ‡∏≥‡∏¢‡πà‡∏≠‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÄ‡∏°‡∏ô‡∏π"
        )

    if q == "po":
        current_topic = "po"
        return (
            "‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡∏Ç‡∏≠‡∏á PO:\n"
            "1) ‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏Å‡∏≤‡∏£‡πÄ‡∏õ‡∏¥‡∏î PO\n"
            "   1.1) ‡πÄ‡∏õ‡∏¥‡∏î PO ‡∏´‡∏•‡∏≤‡∏¢‡∏á‡∏ß‡∏î\n"
            "   1.2) ‡πÄ‡∏õ‡∏¥‡∏î PO ‡∏¢‡πâ‡∏≠‡∏ô‡∏´‡∏•‡∏±‡∏á\n"
            "2) ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç PO\n"
            "   2.1) ‡πÄ‡∏á‡∏∑‡πà‡∏≠‡∏ô‡πÑ‡∏Ç‡∏Å‡∏≤‡∏£‡∏ä‡∏≥‡∏£‡∏∞‡πÄ‡∏á‡∏¥‡∏ô\n"
            "3) ‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å PO\n"
            "4) ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• PO\n"
            "5) ‡πÄ‡∏õ‡∏£‡∏µ‡∏¢‡∏ö‡πÄ‡∏ó‡∏µ‡∏¢‡∏ö‡∏£‡∏≤‡∏Ñ‡∏≤ PO\n"
            "6) PO ‡∏ó‡∏µ‡πà‡∏°‡∏µ‡πÑ‡∏ü‡∏•‡πå‡πÅ‡∏ô‡∏ö\n"
            "7) ‡∏õ‡∏¥‡∏î PO\n\n"
            "üëâ ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏û‡∏¥‡∏°‡∏û‡πå‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏•‡∏Ç‡∏´‡∏£‡∏∑‡∏≠‡∏Ñ‡∏≥‡∏¢‡πà‡∏≠‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÄ‡∏°‡∏ô‡∏π"
        )
    if q == "bom":
        current_topic = "bom"
        return (
            "‡πÄ‡∏°‡∏ô‡∏π BOM:\n"
            "1) ‡∏™‡∏£‡πâ‡∏≤‡∏á BOM\n"
            "2) ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç BOM\n"
            "3) Approve BOM\n"
            "4) ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ß‡∏±‡∏ï‡∏ñ‡∏∏‡∏î‡∏¥‡∏ö‡πÉ‡∏ô BOM\n"
            "5) ‡∏õ‡∏£‡∏±‡∏ö‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÉ‡∏ô Parent Item\n"
            "6) ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞ BOM\n"
            "7) ‡∏Å‡∏£‡∏ì‡∏µ‡∏ó‡∏µ‡πà BOM ‡∏ï‡πâ‡∏≠‡∏á‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏°\n"
            "8) ‡∏Å‡∏£‡∏ì‡∏µ‡∏ó‡∏µ‡πà BOM ‡πÑ‡∏°‡πà‡∏ú‡πà‡∏≤‡∏ô‡∏Å‡∏≤‡∏£‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥\n\n"
            "üëâ ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏û‡∏¥‡∏°‡∏û‡πå‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏•‡∏Ç‡∏´‡∏£‡∏∑‡∏≠‡∏Ñ‡∏≥‡∏¢‡πà‡∏≠‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÄ‡∏°‡∏ô‡∏π"
        )
    if q in ["return merchandise authorization","rma","‡∏Ñ‡∏∑‡∏ô‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤"]:
        current_topic = "rma"
        return (
                "‡∏Å‡∏≤‡∏£‡∏Ñ‡∏∑‡∏ô‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ (RMA):\n\n"
                "1) ‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£‡∏Ñ‡∏∑‡∏ô‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ (Create RMA)\n"
                "2) ‡∏™‡πà‡∏á‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£‡∏Ñ‡∏∑‡∏ô‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏Ç‡∏≠‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥ (Submit for Approval)\n"
                "3) ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏Å‡∏≤‡∏£‡∏Ñ‡∏∑‡∏ô‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ (RMA Status)\n"
                "4) ‡∏£‡∏±‡∏ö‡∏Ñ‡∏∑‡∏ô‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÄ‡∏Ç‡πâ‡∏≤‡∏Ñ‡∏•‡∏±‡∏á (Receive Returned Goods)\n"
                "5) ‡∏õ‡∏¥‡∏î‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£‡∏Ñ‡∏∑‡∏ô‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ (Close RMA)\n"
                "6) ‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£‡∏Ñ‡∏∑‡∏ô‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ (Cancel RMA)\n\n"
                "üëâ ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏û‡∏¥‡∏°‡∏û‡πå‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏•‡∏Ç‡∏´‡∏£‡∏∑‡∏≠‡∏Ñ‡∏≥‡∏¢‡πà‡∏≠‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÄ‡∏°‡∏ô‡∏π"
            )
    if q in ["pi","proforma invoice","proforma","‡∏™‡∏£‡πâ‡∏≤‡∏á proforma invoice pi","create pi","‡∏™‡∏£‡πâ‡∏≤‡∏á pi","create proforma invoice","‡∏û‡∏¥‡∏°‡∏û‡πå proforma invoice","‡∏û‡∏¥‡∏°‡∏û‡πå pi"]:
        return get_answer_by_intent("sales_pi_create")
    if q in ["invoice","‡∏™‡∏£‡πâ‡∏≤‡∏á sales invoice","create sales invoice","‡∏™‡∏£‡πâ‡∏≤‡∏á invoice","create invoice","‡∏û‡∏¥‡∏°‡∏û‡πå sales invoice","‡∏û‡∏¥‡∏°‡∏û‡πå invoice"]:
        return get_answer_by_intent("sales_invoice_create")
    


    # ===== ERP MAIN MENU =====
    if q in ["erp", "‡πÄ‡∏°‡∏ô‡∏π erp", "erp menu","menu","‡πÄ‡∏°‡∏ô‡∏π","Menu ERP"]:
        current_topic = "erp_main"
        return (
            "‡πÄ‡∏°‡∏ô‡∏π‡∏´‡∏•‡∏±‡∏Å ERP:\n\n"
            "1) ‡∏ù‡πà‡∏≤‡∏¢‡∏à‡∏±‡∏î‡∏ã‡∏∑‡πâ‡∏≠\n"
            "2) ‡∏ï‡πâ‡∏ô‡∏ó‡∏∏‡∏ô\n"
            "3) ‡∏ù‡πà‡∏≤‡∏¢‡∏Ç‡∏≤‡∏¢‡∏ï‡πà‡∏≤‡∏á‡∏õ‡∏£‡∏∞‡πÄ‡∏ó‡∏®\n"
            "4) ‡∏ù‡πà‡∏≤‡∏¢‡∏Ñ‡∏•‡∏±‡∏á‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÅ‡∏•‡∏∞‡∏à‡∏±‡∏î‡∏™‡πà‡∏á\n"
            "5) ‡∏ù‡πà‡∏≤‡∏¢‡πÄ‡∏ó‡∏Ñ‡πÇ‡∏ô‡πÇ‡∏•‡∏¢‡∏µ‡∏™‡∏≤‡∏£‡∏™‡∏ô‡πÄ‡∏ó‡∏®\n"
            "6) ‡∏ù‡πà‡∏≤‡∏¢‡∏ö‡∏±‡∏ç‡∏ä‡∏µ‡πÅ‡∏•‡∏∞‡∏Å‡∏≤‡∏£‡πÄ‡∏á‡∏¥‡∏ô\n"
            "7) ‡∏ù‡πà‡∏≤‡∏¢‡∏ö‡∏∏‡∏Ñ‡∏Ñ‡∏•\n\n"
            "üëâ ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏û‡∏¥‡∏°‡∏û‡πå‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏•‡∏Ç‡∏´‡∏£‡∏∑‡∏≠‡∏ä‡∏∑‡πà‡∏≠‡πÄ‡∏°‡∏ô‡∏π"
        )

    # ===== ERP MAIN SELECT =====
    if current_topic == "erp_main":
        if q in ["1","‡∏ù‡πà‡∏≤‡∏¢‡∏à‡∏±‡∏î‡∏ã‡∏∑‡πâ‡∏≠", "purchase", "‡∏à‡∏±‡∏î‡∏ã‡∏∑‡πâ‡∏≠", "purchasing", "pr", "po","‡πÄ‡∏°‡∏ô‡∏π‡∏ù‡πà‡∏≤‡∏¢‡∏à‡∏±‡∏î‡∏ã‡∏∑‡πâ‡∏≠"]:
            current_topic = "selling_root"
            return (
                "‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏≠‡∏∞‡πÑ‡∏£‡πÉ‡∏ô‡∏ù‡πà‡∏≤‡∏¢‡∏à‡∏±‡∏î‡∏ã‡∏∑‡πâ‡∏≠:\n\n"
                "1) ‡∏Å‡∏£‡∏∞‡∏ö‡∏ß‡∏ô‡∏Å‡∏≤‡∏£‡∏ï‡πà‡∏≤‡∏á‡πÜ‡πÉ‡∏ô PR\n"
                "2) ‡∏Å‡∏£‡∏∞‡∏ö‡∏ß‡∏ô‡∏Å‡∏≤‡∏£‡∏ï‡πà‡∏≤‡∏á‡πÜ‡πÉ‡∏ô PO\n"
                "3) ‡∏ß‡∏¥‡∏ò‡∏µ‡∏Å‡∏≤‡∏£‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞ PR ‡πÅ‡∏•‡∏∞ PO\n"
                "4) ‡∏ß‡∏¥‡∏ò‡∏µ‡∏Å‡∏≤‡∏£‡∏™‡∏£‡πâ‡∏≤‡∏á PR ‡πÅ‡∏•‡∏∞ PO ‡∏Å‡∏£‡∏ì‡∏µ‡∏°‡∏µ VAT\n"
                "5) ‡∏ß‡∏¥‡∏ò‡∏µ‡∏Å‡∏≤‡∏£‡∏î‡∏∂‡∏á Report PR ‡πÅ‡∏•‡∏∞ PO\n\n"
                "üëâ ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏û‡∏¥‡∏°‡∏û‡πå‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏•‡∏Ç‡∏´‡∏£‡∏∑‡∏≠‡∏Ñ‡∏≥‡∏¢‡πà‡∏≠‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÄ‡∏°‡∏ô‡∏π"
            )

        if q in ["2", "‡∏ï‡πâ‡∏ô‡∏ó‡∏∏‡∏ô", "cost", "costing","‡∏ù‡πà‡∏≤‡∏¢‡∏ï‡πâ‡∏ô‡∏ó‡∏∏‡∏ô","‡πÄ‡∏°‡∏ô‡∏π‡∏ù‡πà‡∏≤‡∏¢‡∏ï‡πâ‡∏ô‡∏ó‡∏∏‡∏ô"]:
            current_topic = "cost_root"
            return (
                "‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏≠‡∏∞‡πÑ‡∏£‡πÉ‡∏ô‡∏ù‡πà‡∏≤‡∏¢‡∏ï‡πâ‡∏ô‡∏ó‡∏∏‡∏ô:\n\n"
                "1) ‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÅ‡∏•‡∏∞‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏™‡∏π‡∏ï‡∏£‡∏Å‡∏≤‡∏£‡∏ú‡∏•‡∏¥‡∏ï\n"
                "2) ‡∏Å‡∏≤‡∏£‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏ï‡πâ‡∏ô‡∏ó‡∏∏‡∏ô (Rollup Cost)\n"
                "3) ‡∏Å‡∏≤‡∏£‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ï‡πâ‡∏ô‡∏ó‡∏∏‡∏ô‡∏°‡∏≤‡∏ï‡∏£‡∏ê‡∏≤‡∏ô (Standard Cost)\n"
                "4) ‡∏Å‡∏≤‡∏£‡∏õ‡∏£‡∏±‡∏ö‡∏ï‡πâ‡∏ô‡∏ó‡∏∏‡∏ô‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÅ‡∏•‡∏∞‡∏ß‡∏±‡∏ï‡∏ñ‡∏∏‡∏î‡∏¥‡∏ö\n"
                "5) ‡∏Å‡∏≤‡∏£‡∏à‡∏±‡∏î‡∏ó‡∏≥‡∏£‡∏≤‡∏Ñ‡∏≤‡∏Ç‡∏≤‡∏¢ (Price List)\n"
                "6) ‡∏Å‡∏≤‡∏£‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏™‡∏π‡∏ï‡∏£‡∏Å‡∏≤‡∏£‡∏ú‡∏•‡∏¥‡∏ï BOM\n"
                "7) ‡∏Å‡∏≤‡∏£‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥ Proforma Invoice (PI)\n\n"
                "üëâ ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏û‡∏¥‡∏°‡∏û‡πå‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏•‡∏Ç‡∏´‡∏£‡∏∑‡∏≠‡∏Ñ‡∏≥‡∏¢‡πà‡∏≠‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÄ‡∏°‡∏ô‡∏π"
            )
        if q in ["3", "‡∏ù‡πà‡∏≤‡∏¢‡∏Ç‡∏≤‡∏¢","sales","sales department","‡∏ù‡πà‡∏≤‡∏¢‡∏Ç‡∏≤‡∏¢‡∏ï‡πà‡∏≤‡∏á‡∏õ‡∏£‡∏∞‡πÄ‡∏ó‡∏®","‡πÄ‡∏°‡∏ô‡∏π‡∏ù‡πà‡∏≤‡∏¢‡∏Ç‡∏≤‡∏¢"]:
            current_topic = "sales_root"
            return (
                "‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏≠‡∏∞‡πÑ‡∏£‡πÉ‡∏ô‡∏ù‡πà‡∏≤‡∏¢‡∏Ç‡∏≤‡∏¢:\n\n"
                "1) ‡∏Å‡∏≤‡∏£‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á‡∏Ç‡∏≤‡∏¢ (Sales Order)\n"
                "2) ‡∏Å‡∏≤‡∏£‡∏à‡∏±‡∏î‡∏ó‡∏≥‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£‡∏Å‡∏≤‡∏£‡∏Ç‡∏≤‡∏¢ (PI)\n"
                "3) ‡∏Å‡∏≤‡∏£‡∏à‡∏±‡∏î‡∏ó‡∏≥‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£‡∏Å‡∏≤‡∏£‡∏Ç‡∏≤‡∏¢ (Invoice)\n"
                "4) ‡∏Å‡∏≤‡∏£‡∏Ñ‡∏∑‡∏ô‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ (RMA)\n"
                "5) ‡∏Å‡∏≤‡∏£‡∏£‡πâ‡∏≠‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤ (Customer Complaint)\n"
                "6) ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£‡∏ù‡πà‡∏≤‡∏¢‡∏Ç‡∏≤‡∏¢\n\n"
                "üëâ ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏û‡∏¥‡∏°‡∏û‡πå‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏•‡∏Ç‡∏´‡∏£‡∏∑‡∏≠‡∏Ñ‡∏≥‡∏¢‡πà‡∏≠‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÄ‡∏°‡∏ô‡∏π"
            )
        if q in ["4", "‡∏ù‡πà‡∏≤‡∏¢‡∏Ñ‡∏•‡∏±‡∏á‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÅ‡∏•‡∏∞‡∏à‡∏±‡∏î‡∏™‡πà‡∏á","warehouse","inventory","stock","logistics","‡∏Ñ‡∏•‡∏±‡∏á","‡∏à‡∏±‡∏î‡∏™‡πà‡∏á","shipping","delivery","‡∏™‡πà‡∏á‡∏Ç‡∏≠‡∏á","‡∏Ñ‡∏•‡∏±‡∏á‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤","‡πÄ‡∏°‡∏ô‡∏π‡∏ù‡πà‡∏≤‡∏¢‡∏Ñ‡∏•‡∏±‡∏á‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÅ‡∏•‡∏∞‡∏à‡∏±‡∏î‡∏™‡πà‡∏á"]:
            current_topic = "Warehouse & Delivery_root"
            return (
                "‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏≠‡∏∞‡πÑ‡∏£‡πÉ‡∏ô‡∏ù‡πà‡∏≤‡∏¢‡∏Ñ‡∏•‡∏±‡∏á‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÅ‡∏•‡∏∞‡∏à‡∏±‡∏î‡∏™‡πà‡∏á:\n\n"
                "1) ‡∏ï‡∏£‡∏ß‡∏à‡∏ô‡∏±‡∏ö‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ (Stock Count)\n"
                "2) ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏ú‡∏•‡∏Å‡∏≤‡∏£‡∏ï‡∏£‡∏ß‡∏à‡∏ô‡∏±‡∏ö‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤\n"
                "3) ‡∏õ‡∏£‡∏±‡∏ö‡∏õ‡∏£‡∏∏‡∏á‡∏¢‡∏≠‡∏î‡∏Ñ‡∏á‡∏Ñ‡∏•‡∏±‡∏á‡∏à‡∏≤‡∏Å‡∏Å‡∏≤‡∏£‡∏ï‡∏£‡∏ß‡∏à‡∏ô‡∏±‡∏ö\n"
                "4) ‡∏£‡∏±‡∏ö‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ / ‡∏ï‡∏±‡πâ‡∏á‡∏£‡∏±‡∏ö‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤\n"
                "5) ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏£‡∏±‡∏ö‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤\n"
                "6) ‡∏•‡∏î‡∏´‡∏ô‡∏µ‡πâ / ‡∏Ñ‡∏∑‡∏ô‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤\n"
                "7) ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£‡∏Ñ‡∏•‡∏±‡∏á‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤\n\n"
                "üëâ ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏û‡∏¥‡∏°‡∏û‡πå‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏•‡∏Ç‡∏´‡∏£‡∏∑‡∏≠‡∏Ñ‡∏≥‡∏¢‡πà‡∏≠‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÄ‡∏°‡∏ô‡∏π"
            )
        if q in ["5", "‡∏ù‡πà‡∏≤‡∏¢‡πÄ‡∏ó‡∏Ñ‡πÇ‡∏ô‡πÇ‡∏•‡∏¢‡∏µ‡∏™‡∏≤‡∏£‡∏™‡∏ô‡πÄ‡∏ó‡∏®","it","information technology","‡πÑ‡∏≠‡∏ó‡∏µ","it support","support","‡πÄ‡∏°‡∏ô‡∏π‡∏ù‡πà‡∏≤‡∏¢‡πÄ‡∏ó‡∏Ñ‡πÇ‡∏ô‡πÇ‡∏•‡∏¢‡∏µ‡∏™‡∏≤‡∏£‡∏™‡∏ô‡πÄ‡∏ó‡∏®"]:
            current_topic = "it_root"
            return (
                "‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏≠‡∏∞‡πÑ‡∏£‡πÉ‡∏ô‡∏ù‡πà‡∏≤‡∏¢‡πÄ‡∏ó‡∏Ñ‡πÇ‡∏ô‡πÇ‡∏•‡∏¢‡∏µ‡∏™‡∏≤‡∏£‡∏™‡∏ô‡πÄ‡∏ó‡∏®:\n\n"
                "1) ‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏´‡∏ô‡πà‡∏ß‡∏¢‡∏ô‡∏±‡∏ö\n"
                "2) ‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ (Part Setup)\n"
                "3) ‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤ (Customer Setup)\n"
                "4) ‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ú‡∏π‡πâ‡∏Ç‡∏≤‡∏¢ (Supplier Setup)\n"
                "5) ‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏ù‡πà‡∏≤‡∏¢‡∏à‡∏±‡∏î‡∏ã‡∏∑‡πâ‡∏≠ (Purchasing Setup)\n"
                "6) ‡∏Å‡∏≤‡∏£‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡πÉ‡∏ö‡∏Ç‡∏≠‡∏ã‡∏∑‡πâ‡∏≠ (Requisition Action)\n"
                "7) ‡∏Å‡∏≤‡∏£‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô (User Security)\n"
                "8) ‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏õ‡∏è‡∏¥‡∏ó‡∏¥‡∏ô‡∏ö‡∏±‡∏ç‡∏ä‡∏µ (Fiscal Calendar)\n\n"
                
                "üëâ ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏û‡∏¥‡∏°‡∏û‡πå‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏•‡∏Ç‡∏´‡∏£‡∏∑‡∏≠‡∏Ñ‡∏≥‡∏¢‡πà‡∏≠‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÄ‡∏°‡∏ô‡∏π"
            )
        if q in ["6", "‡∏ù‡πà‡∏≤‡∏¢‡∏ö‡∏±‡∏ç‡∏ä‡∏µ‡πÅ‡∏•‡∏∞‡∏Å‡∏≤‡∏£‡πÄ‡∏á‡∏¥‡∏ô","accounting","finance","‡∏ö‡∏±‡∏ç‡∏ä‡∏µ","‡∏Å‡∏≤‡∏£‡πÄ‡∏á‡∏¥‡∏ô","‡πÄ‡∏°‡∏ô‡∏π‡∏ù‡πà‡∏≤‡∏¢‡∏ö‡∏±‡∏ç‡∏ä‡∏µ‡πÅ‡∏•‡∏∞‡∏Å‡∏≤‡∏£‡πÄ‡∏á‡∏¥‡∏ô"]:
            current_topic = "finance_root"
            return (
                
                "‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏≠‡∏∞‡πÑ‡∏£‡πÉ‡∏ô‡∏ù‡πà‡∏≤‡∏¢‡∏ö‡∏±‡∏ç‡∏ä‡∏µ‡πÅ‡∏•‡∏∞‡∏Å‡∏≤‡∏£‡πÄ‡∏á‡∏¥‡∏ô:\n\n"
                "1) ‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏•‡∏π‡∏Å‡∏´‡∏ô‡∏µ‡πâ (AR Customer Setup)\n"
                "2) ‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏à‡πâ‡∏≤‡∏´‡∏ô‡∏µ‡πâ (AP Supplier Setup)\n"
                "3) ‡∏ò‡∏ô‡∏≤‡∏Ñ‡∏≤‡∏£ (Bank Management)\n"
                "4) ‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏†‡∏≤‡∏©‡∏µ‡∏°‡∏π‡∏•‡∏Ñ‡πà‡∏≤‡πÄ‡∏û‡∏¥‡πà‡∏° (VAT Setup)\n"
                "5) ‡∏ö‡∏±‡∏ç‡∏ä‡∏µ‡πÅ‡∏¢‡∏Å‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó (General Ledger : GL)\n"
                "6) ‡∏™‡∏°‡∏∏‡∏î‡∏£‡∏≤‡∏¢‡∏ß‡∏±‡∏ô‡∏ó‡∏±‡πà‡∏ß‡πÑ‡∏õ (Journal Entry)\n\n"
                "üëâ ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏û‡∏¥‡∏°‡∏û‡πå‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏•‡∏Ç‡∏´‡∏£‡∏∑‡∏≠‡∏Ñ‡∏≥‡∏¢‡πà‡∏≠‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÄ‡∏°‡∏ô‡∏π"
            )
        if q in ["7", "‡∏ù‡πà‡∏≤‡∏¢‡∏ö‡∏∏‡∏Ñ‡∏Ñ‡∏•","hr","human resources","‡∏ö‡∏∏‡∏Ñ‡∏Ñ‡∏•","‡∏ó‡∏£‡∏±‡∏û‡∏¢‡∏≤‡∏Å‡∏£‡∏°‡∏ô‡∏∏‡∏©‡∏¢‡πå","‡πÄ‡∏°‡∏ô‡∏π‡∏ù‡πà‡∏≤‡∏¢‡∏ö‡∏∏‡∏Ñ‡∏Ñ‡∏•"]:
            current_topic = "hr_root"
            return (
                "‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏≠‡∏∞‡πÑ‡∏£‡πÉ‡∏ô‡∏ù‡πà‡∏≤‡∏¢‡∏ö‡∏∏‡∏Ñ‡∏Ñ‡∏•:\n\n"
                "1) ‡∏Å‡∏≤‡∏£‡πÄ‡∏ö‡∏¥‡∏Å - ‡∏£‡∏±‡∏ö‡∏Ñ‡∏∑‡∏ô‡∏ß‡∏±‡∏™‡∏î‡∏∏‡∏™‡∏¥‡πâ‡∏ô‡πÄ‡∏õ‡∏•‡∏∑‡∏≠‡∏á\n"
                "2) ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÅ‡∏•‡∏∞‡∏™‡∏ï‡πá‡∏≠‡∏Å\n"
                "3) ‡∏Å‡∏≤‡∏£‡πÇ‡∏≠‡∏ô‡∏¢‡πâ‡∏≤‡∏¢‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤\n\n"
            )

    # ===== PURCHASING MENU =====
    if current_topic == "selling_root":
        if q in ["1", "pr"]:
            current_topic = "pr"
            return (
                "‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡∏Ç‡∏≠‡∏á PR:\n"
                "1) ‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏Å‡∏≤‡∏£‡πÄ‡∏õ‡∏¥‡∏î PR\n"
                "2) ‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏Å‡∏≤‡∏£‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç PR\n"
                "3) ‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏Å‡∏≤‡∏£‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å PR\n\n"
                "üëâ ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏û‡∏¥‡∏°‡∏û‡πå‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏•‡∏Ç‡∏´‡∏£‡∏∑‡∏≠‡∏Ñ‡∏≥‡∏¢‡πà‡∏≠‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÄ‡∏°‡∏ô‡∏π"
            )

        if q in ["2", "po"]:
            current_topic = "po"
            return (
                "‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡∏Ç‡∏≠‡∏á PO:\n"
                "1) ‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏Å‡∏≤‡∏£‡πÄ‡∏õ‡∏¥‡∏î PO\n"
                "   1.1) ‡πÄ‡∏õ‡∏¥‡∏î PO ‡∏´‡∏•‡∏≤‡∏¢‡∏á‡∏ß‡∏î\n"
                "   1.2) ‡πÄ‡∏õ‡∏¥‡∏î PO ‡∏¢‡πâ‡∏≠‡∏ô‡∏´‡∏•‡∏±‡∏á\n"
                "2) ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç PO\n"
                "   2.1) ‡πÄ‡∏á‡∏∑‡πà‡∏≠‡∏ô‡πÑ‡∏Ç‡∏Å‡∏≤‡∏£‡∏ä‡∏≥‡∏£‡∏∞‡πÄ‡∏á‡∏¥‡∏ô\n"
                "3) ‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å PO\n"
                "4) ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• PO\n"
                "5) ‡πÄ‡∏õ‡∏£‡∏µ‡∏¢‡∏ö‡πÄ‡∏ó‡∏µ‡∏¢‡∏ö‡∏£‡∏≤‡∏Ñ‡∏≤ PO\n"
                "6) PO ‡∏ó‡∏µ‡πà‡∏°‡∏µ‡πÑ‡∏ü‡∏•‡πå‡πÅ‡∏ô‡∏ö\n"
                "7) ‡∏õ‡∏¥‡∏î PO\n\n"
                "üëâ ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏û‡∏¥‡∏°‡∏û‡πå‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏•‡∏Ç‡∏´‡∏£‡∏∑‡∏≠‡∏Ñ‡∏≥‡∏¢‡πà‡∏≠‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÄ‡∏°‡∏ô‡∏π"
            )

        if q in ["3", "‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞", "status"]:
            return get_answer_by_intent("erp_pr_po_status")

        if q in ["4", "vat"]:
            return get_answer_by_intent("erp_pr_po_mix_vat")

        if q in ["5", "report", "‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô"]:
            return get_answer_by_intent("erp_report_monthly")
        
    # ===== PR MENU =====
    if current_topic == "pr" and q in ERP_PR_INTENT:
        return get_answer_by_intent(ERP_PR_INTENT[q])

    # ===== PO MENU =====
    if current_topic == "po" and q in ERP_PO_INTENT:
        return get_answer_by_intent(ERP_PO_INTENT[q])
    
    # ===== COST MENU =====
    if current_topic == "cost_root":
        if q in ["1", "‡∏™‡∏π‡∏ï‡∏£‡∏Å‡∏≤‡∏£‡∏ú‡∏•‡∏¥‡∏ï", "bom","bill of material", "bill of materials",]:
            current_topic = "bom"
            return (
                "‡πÄ‡∏°‡∏ô‡∏π BOM:\n"
                "1) ‡∏™‡∏π‡∏ï‡∏£‡∏Å‡∏≤‡∏£‡∏ú‡∏•‡∏¥‡∏ï BOM\n"
                "2) ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç BOM\n"
                "3) Approve BOM\n"
                "4) ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ß‡∏±‡∏ï‡∏ñ‡∏∏‡∏î‡∏¥‡∏ö‡πÉ‡∏ô BOM\n"
                "5) ‡∏õ‡∏£‡∏±‡∏ö‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÉ‡∏ô Parent Item\n"
                "6) ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞ BOM\n"
                "7) ‡∏Å‡∏£‡∏ì‡∏µ‡∏ó‡∏µ‡πà BOM ‡∏ï‡πâ‡∏≠‡∏á‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏°\n"
                "8) ‡∏Å‡∏£‡∏ì‡∏µ‡∏ó‡∏µ‡πà BOM ‡πÑ‡∏°‡πà‡∏ú‡πà‡∏≤‡∏ô‡∏Å‡∏≤‡∏£‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥\n\n"
                "üëâ ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏û‡∏¥‡∏°‡∏û‡πå‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏•‡∏Ç‡∏´‡∏£‡∏∑‡∏≠‡∏Ñ‡∏≥‡∏¢‡πà‡∏≠‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÄ‡∏°‡∏ô‡∏π"
            )
        if q in ["2", "‡∏Å‡∏≤‡∏£‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏ï‡πâ‡∏ô‡∏ó‡∏∏‡∏ô", "rollup cost"]:
            current_topic = "cost_rollup"
            return (
                "‡∏Å‡∏≤‡∏£‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏ï‡πâ‡∏ô‡∏ó‡∏∏‡∏ô (Rollup Cost):\n"
                "1) ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏ï‡πâ‡∏ô‡∏ó‡∏∏‡∏ô‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ (Run Rollup Cost)\n"
                "2) ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ú‡∏•‡∏Å‡∏≤‡∏£‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏ï‡πâ‡∏ô‡∏ó‡∏∏‡∏ô\n"
                "3) ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ï‡πâ‡∏ô‡∏ó‡∏∏‡∏ô‡πÅ‡∏¢‡∏Å‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£ (Cost Detail)\n"
                "4) ‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡∏ó‡∏µ‡πà‡∏û‡∏ö‡∏ö‡πà‡∏≠‡∏¢‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏ï‡πâ‡∏ô‡∏ó‡∏∏‡∏ô\n"
                "5) ‡πÄ‡∏á‡∏∑‡πà‡∏≠‡∏ô‡πÑ‡∏Ç‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Å‡πà‡∏≠‡∏ô Rollup Cost\n\n"
                "üëâ ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏û‡∏¥‡∏°‡∏û‡πå‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏•‡∏Ç‡∏´‡∏£‡∏∑‡∏≠‡∏Ñ‡∏≥‡∏¢‡πà‡∏≠‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÄ‡∏°‡∏ô‡∏π"
            )
        if q in ["3", "‡∏Å‡∏≤‡∏£‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏ï‡πâ‡∏ô‡∏ó‡∏∏‡∏ô", "rollup cost"]:
            current_topic = "standard_cost"
            return (
                "‡∏Å‡∏≤‡∏£‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏ï‡πâ‡∏ô‡∏ó‡∏∏‡∏ô (Rollup Cost):\n"
                "1) ‡∏Å‡∏≤‡∏£‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ï‡πâ‡∏ô‡∏ó‡∏∏‡∏ô‡∏°‡∏≤‡∏ï‡∏£‡∏ê‡∏≤‡∏ô (Standard Cost)\n"
                "2) ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ï‡πâ‡∏ô‡∏ó‡∏∏‡∏ô‡πÅ‡∏¢‡∏Å‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£ (Cost Detail)\n"
                "3) ‡πÄ‡∏õ‡∏£‡∏µ‡∏¢‡∏ö‡πÄ‡∏ó‡∏µ‡∏¢‡∏ö‡∏ï‡πâ‡∏ô‡∏ó‡∏∏‡∏ô‡∏Å‡πà‡∏≠‡∏ô‚Äì‡∏´‡∏•‡∏±‡∏á Rollup Cost\n"
                "4) ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤‡∏ï‡πâ‡∏ô‡∏ó‡∏∏‡∏ô‡∏ñ‡∏π‡∏Å Load ‡πÅ‡∏•‡πâ‡∏ß‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà\n"
                "5) ‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡∏ó‡∏µ‡πà‡∏û‡∏ö‡∏ö‡πà‡∏≠‡∏¢‡∏Ç‡∏≠‡∏á Standard Cost\n"
                "6) Standard Cost ‡∏Å‡∏±‡∏ö BOM / Rollup Cost ‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß‡∏Ç‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô‡∏≠‡∏¢‡πà‡∏≤‡∏á‡πÑ‡∏£\n"
                "7) ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö Standard Cost ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ô‡∏≥‡πÑ‡∏õ‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡∏ï‡πà‡∏≠\n\n"
                "üëâ ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏û‡∏¥‡∏°‡∏û‡πå‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏•‡∏Ç‡∏´‡∏£‡∏∑‡∏≠‡∏Ñ‡∏≥‡∏¢‡πà‡∏≠‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÄ‡∏°‡∏ô‡∏π"
            )
        if q in ["4", "‡∏Å‡∏≤‡∏£‡∏õ‡∏£‡∏±‡∏ö‡∏ï‡πâ‡∏ô‡∏ó‡∏∏‡∏ô‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÅ‡∏•‡∏∞‡∏ß‡∏±‡∏ï‡∏ñ‡∏∏‡∏î‡∏¥‡∏ö", "adjust cost"]:
            current_topic = "adjust_cost"
            return (
                "‡∏Å‡∏≤‡∏£‡∏õ‡∏£‡∏±‡∏ö‡∏ï‡πâ‡∏ô‡∏ó‡∏∏‡∏ô‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÅ‡∏•‡∏∞‡∏ß‡∏±‡∏ï‡∏ñ‡∏∏‡∏î‡∏¥‡∏ö:\n"
                "1) ‡∏õ‡∏£‡∏±‡∏ö‡∏ï‡πâ‡∏ô‡∏ó‡∏∏‡∏ô‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤\n"
                "2) ‡∏õ‡∏£‡∏±‡∏ö‡∏ï‡πâ‡∏ô‡∏ó‡∏∏‡∏ô‡∏ß‡∏±‡∏ï‡∏ñ‡∏∏‡∏î‡∏¥‡∏ö\n"
                "3) ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ú‡∏•‡∏Å‡∏£‡∏∞‡∏ó‡∏ö‡∏ï‡πà‡∏≠‡∏™‡∏ï‡πá‡∏≠‡∏Å\n"
                "4) ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡∏õ‡∏£‡∏±‡∏ö‡∏ï‡πâ‡∏ô‡∏ó‡∏∏‡∏ô\n"
                "5) ‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡∏ó‡∏µ‡πà‡∏û‡∏ö‡∏ö‡πà‡∏≠‡∏¢‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏õ‡∏£‡∏±‡∏ö‡∏ï‡πâ‡∏ô‡∏ó‡∏∏‡∏ô\n"
                "6) ‡∏Å‡∏£‡∏ì‡∏µ‡∏ó‡∏µ‡πà‡∏õ‡∏£‡∏±‡∏ö‡∏ï‡πâ‡∏ô‡∏ó‡∏∏‡∏ô‡πÅ‡∏•‡πâ‡∏ß‡∏ï‡πâ‡∏ô‡∏ó‡∏∏‡∏ô‡πÑ‡∏°‡πà‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÅ‡∏õ‡∏•‡∏á\n\n"
                "üëâ ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏û‡∏¥‡∏°‡∏û‡πå‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏•‡∏Ç‡∏´‡∏£‡∏∑‡∏≠‡∏Ñ‡∏≥‡∏¢‡πà‡∏≠‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÄ‡∏°‡∏ô‡∏π"
            )
        if q in ["5", "‡∏Å‡∏≤‡∏£‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏ï‡πâ‡∏ô‡∏ó‡∏∏‡∏ô", "price list"]:
            current_topic = "price_list"
            return (
                "‡∏Å‡∏≤‡∏£‡∏à‡∏±‡∏î‡∏ó‡∏≥‡∏£‡∏≤‡∏Ñ‡∏≤‡∏Ç‡∏≤‡∏¢ (Price List):\n"
                "1) ‡∏™‡∏£‡πâ‡∏≤‡∏á Price List\n"
                "2) ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÉ‡∏ô Price List\n"
                "3) ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç Price List\n"
                "4) ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö Price List ‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤\n"
                "5) ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡πÅ‡∏•‡∏∞‡∏ä‡πà‡∏ß‡∏á‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà Price List\n"
                "6) Export / ‡∏û‡∏¥‡∏°‡∏û‡πå Price List\n"
                "7) ‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡∏ó‡∏µ‡πà‡∏û‡∏ö‡∏ö‡πà‡∏≠‡∏¢‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏à‡∏±‡∏î‡∏ó‡∏≥‡∏£‡∏≤‡∏Ñ‡∏≤‡∏Ç‡∏≤‡∏¢\n\n"
                "üëâ ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏û‡∏¥‡∏°‡∏û‡πå‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏•‡∏Ç‡∏´‡∏£‡∏∑‡∏≠‡∏Ñ‡∏≥‡∏¢‡πà‡∏≠‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÄ‡∏°‡∏ô‡∏π"
            )
        if q in ["6", "‡∏Å‡∏≤‡∏£‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏™‡∏π‡∏ï‡∏£‡∏Å‡∏≤‡∏£‡∏ú‡∏•‡∏¥‡∏ï bom", "bom status"]:
            current_topic = "bom_check_status"
            return (
                "‡∏Å‡∏≤‡∏£‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏™‡∏π‡∏ï‡∏£‡∏Å‡∏≤‡∏£‡∏ú‡∏•‡∏¥‡∏ï BOM:\n"
                "1) ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞ BOM\n\n"
                "2) ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤ BOM ‡∏ú‡πà‡∏≤‡∏ô‡∏Å‡∏≤‡∏£‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà\n\n"
                "3) ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö BOM ‡∏ó‡∏µ‡πà‡∏£‡∏≠‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥\n\n"
                "4) ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö BOM ‡∏ó‡∏µ‡πà‡πÑ‡∏°‡πà‡∏ú‡πà‡∏≤‡∏ô‡∏Å‡∏≤‡∏£‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥\n\n"
                "5) ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö Revision ‡∏Ç‡∏≠‡∏á BOM\n\n"
                "üëâ ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏û‡∏¥‡∏°‡∏û‡πå‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏•‡∏Ç‡∏´‡∏£‡∏∑‡∏≠‡∏Ñ‡∏≥‡∏¢‡πà‡∏≠‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÄ‡∏°‡∏ô‡∏π"
            )
        if q in ["7", "‡∏Å‡∏≤‡∏£‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥ proforma invoice pi", "proforma invoice", "pi"]:
            current_topic = "proforma_invoice"
            return (
                "‡∏Å‡∏≤‡∏£‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥ Proforma Invoice (PI):\n"
                "1) ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö PI\n"
                "2) ‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥ PI\n"
                "3) ‡∏õ‡∏è‡∏¥‡πÄ‡∏™‡∏ò PI\n"
                "4) ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞ PI\n"
                "5) ‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡∏ó‡∏µ‡πà‡∏û‡∏ö‡∏ö‡πà‡∏≠‡∏¢‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥ PI\n\n"
                "üëâ ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏û‡∏¥‡∏°‡∏û‡πå‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏•‡∏Ç‡∏´‡∏£‡∏∑‡∏≠‡∏Ñ‡∏≥‡∏¢‡πà‡∏≠‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÄ‡∏°‡∏ô‡∏π"
            )
    if current_topic == "sales_root":
        if q in ["1", "‡∏Å‡∏≤‡∏£‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á‡∏Ç‡∏≤‡∏¢", "sales order","sales","‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á‡∏Ç‡∏≤‡∏¢"]:
            current_topic = "sales_order"
            return (
                "‡∏Å‡∏≤‡∏£‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á‡∏Ç‡∏≤‡∏¢ (Sales Order):\n\n"
                "1) ‡πÄ‡∏õ‡∏¥‡∏î‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á‡∏Ç‡∏≤‡∏¢ (Create Sales Order)\n"
                "2) ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á‡∏Ç‡∏≤‡∏¢\n"
                "3) ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á‡∏Ç‡∏≤‡∏¢\n"
                "4) ‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á‡∏Ç‡∏≤‡∏¢\n"
                "5) ‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡∏ó‡∏µ‡πà‡∏û‡∏ö‡∏ö‡πà‡∏≠‡∏¢‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß‡∏Å‡∏±‡∏ö Sales Order\n\n"
                "üëâ ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏û‡∏¥‡∏°‡∏û‡πå‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏•‡∏Ç‡∏´‡∏£‡∏∑‡∏≠‡∏Ñ‡∏≥‡∏¢‡πà‡∏≠‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÄ‡∏°‡∏ô‡∏π"
                )
    
        if q in ["2", "‡∏™‡∏£‡πâ‡∏≤‡∏á proforma invoice pi","create pi","‡∏™‡∏£‡πâ‡∏≤‡∏á pi","create proforma invoice","‡∏û‡∏¥‡∏°‡∏û‡πå proforma invoice","‡∏û‡∏¥‡∏°‡∏û‡πå pi"]:
            return get_answer_by_intent("sales_pi_create")
        if q in ["3", "‡∏™‡∏£‡πâ‡∏≤‡∏á sales invoice","create sales invoice","‡∏™‡∏£‡πâ‡∏≤‡∏á invoice","create invoice","‡∏û‡∏¥‡∏°‡∏û‡πå sales invoice","‡∏û‡∏¥‡∏°‡∏û‡πå invoice"]:
            return get_answer_by_intent("sales_invoice_create")
        if q in ["4", "return merchandise authorization","rma","‡∏Ñ‡∏∑‡∏ô‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤"]:
            current_topic = "rma"
            return (
                "‡∏Å‡∏≤‡∏£‡∏Ñ‡∏∑‡∏ô‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ (RMA):\n\n"
                "1) ‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£‡∏Ñ‡∏∑‡∏ô‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ (Create RMA)\n"
                "2) ‡∏™‡πà‡∏á‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£‡∏Ñ‡∏∑‡∏ô‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏Ç‡∏≠‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥ (Submit for Approval)\n"
                "3) ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏Å‡∏≤‡∏£‡∏Ñ‡∏∑‡∏ô‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ (RMA Status)\n"
                "4) ‡∏£‡∏±‡∏ö‡∏Ñ‡∏∑‡∏ô‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÄ‡∏Ç‡πâ‡∏≤‡∏Ñ‡∏•‡∏±‡∏á (Receive Returned Goods)\n"
                "5) ‡∏õ‡∏¥‡∏î‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£‡∏Ñ‡∏∑‡∏ô‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ (Close RMA)\n"
                "6) ‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£‡∏Ñ‡∏∑‡∏ô‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ (Cancel RMA)\n\n"
                "üëâ ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏û‡∏¥‡∏°‡∏û‡πå‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏•‡∏Ç‡∏´‡∏£‡∏∑‡∏≠‡∏Ñ‡∏≥‡∏¢‡πà‡∏≠‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÄ‡∏°‡∏ô‡∏π"
            )
        if q in ["5", "customer complaint","‡∏£‡πâ‡∏≠‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤","complaint"]:
            current_topic = "customer_complaint"
            return (
                "‡∏Å‡∏≤‡∏£‡∏£‡πâ‡∏≠‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤ (Customer Complaint):\n\n"
                "1) ‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏£‡πâ‡∏≠‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤ (Create Complaint)\n"
                "2) ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Å‡∏≤‡∏£‡∏£‡πâ‡∏≠‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô (Edit Customer Complaint)\n"
                "3) ‡πÅ‡∏ô‡∏ö‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£/‡∏£‡∏π‡∏õ‡∏õ‡∏£‡∏∞‡∏Å‡∏≠‡∏ö‡∏Å‡∏≤‡∏£‡∏£‡πâ‡∏≠‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô (Attach Evidence)\n"
                "4) ‡∏™‡πà‡∏á‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏á‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏û‡∏¥‡∏à‡∏≤‡∏£‡∏ì‡∏≤/‡∏™‡∏≠‡∏ö‡∏™‡∏ß‡∏ô (Submit for Investigation)\n"
                "5) ‡∏ï‡∏¥‡∏î‡∏ï‡∏≤‡∏°‡πÅ‡∏•‡∏∞‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏Å‡∏≤‡∏£‡∏£‡πâ‡∏≠‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô (Complaint Status)\n"
                "6) ‡∏õ‡∏¥‡∏î‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏£‡πâ‡∏≠‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô (Close Complaint)\n\n"
                "7) ‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏£‡πâ‡∏≠‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô (Cancel Complaint)\n\n"
                "üëâ ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏û‡∏¥‡∏°‡∏û‡πå‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏•‡∏Ç‡∏´‡∏£‡∏∑‡∏≠‡∏Ñ‡∏≥‡∏¢‡πà‡∏≠‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÄ‡∏°‡∏ô‡∏π"
            )
        if q in ["6", "‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£‡∏ù‡πà‡∏≤‡∏¢‡∏Ç‡∏≤‡∏¢","sales document status","status"]:
            return get_answer_by_intent("sales_doc_status_check")
    if current_topic == "Warehouse & Delivery_root":
        if q in ["1", "‡∏Å‡∏≤‡∏£‡∏£‡∏±‡∏ö‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤","goods receipt","‡∏£‡∏±‡∏ö‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤","‡∏ï‡∏£‡∏ß‡∏à‡∏ô‡∏±‡∏ö‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤","‡∏ï‡∏£‡∏ß‡∏à‡∏ô‡∏±‡∏ö‡∏™‡∏ï‡πá‡∏≠‡∏Å","‡∏ô‡∏±‡∏ö‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏Ñ‡∏á‡∏Ñ‡∏•‡∏±‡∏á","‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏ï‡πá‡∏≠‡∏Å‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤"]:
            return get_answer_by_intent("wh_stock_count")
        if q in ["2", "‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏ú‡∏•‡∏ï‡∏£‡∏ß‡∏à‡∏ô‡∏±‡∏ö","‡∏Å‡∏£‡∏≠‡∏Å‡∏ú‡∏•‡∏ï‡∏£‡∏ß‡∏à‡∏ô‡∏±‡∏ö","‡∏•‡∏á‡∏¢‡∏≠‡∏î‡∏ï‡∏£‡∏ß‡∏à‡∏ô‡∏±‡∏ö‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤","stock count record","‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏ú‡∏•‡∏ï‡∏£‡∏ß‡∏à‡∏ô‡∏±‡∏ö","‡∏Å‡∏£‡∏≠‡∏Å‡∏ú‡∏•‡∏ï‡∏£‡∏ß‡∏à‡∏ô‡∏±‡∏ö","‡∏•‡∏á‡∏¢‡∏≠‡∏î‡∏ï‡∏£‡∏ß‡∏à‡∏ô‡∏±‡∏ö‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤"]:
            return get_answer_by_intent("wh_stock_count_record")
        if q in ["3", "‡∏õ‡∏£‡∏±‡∏ö‡∏™‡∏ï‡πá‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏Å‡∏≤‡∏£‡∏ï‡∏£‡∏ß‡∏à‡∏ô‡∏±‡∏ö","‡∏õ‡∏£‡∏±‡∏ö‡∏¢‡∏≠‡∏î‡∏Ñ‡∏á‡∏Ñ‡∏•‡∏±‡∏á","‡∏õ‡∏£‡∏±‡∏ö‡∏™‡∏ï‡πá‡∏≠‡∏Å‡∏´‡∏•‡∏±‡∏á‡∏ï‡∏£‡∏ß‡∏à‡∏ô‡∏±‡∏ö","stock adjustment from count","‡∏õ‡∏£‡∏±‡∏ö‡∏™‡∏ï‡πá‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏Å‡∏≤‡∏£‡∏ï‡∏£‡∏ß‡∏à‡∏ô‡∏±‡∏ö,‡∏õ‡∏£‡∏±‡∏ö‡∏¢‡∏≠‡∏î‡∏Ñ‡∏á‡∏Ñ‡∏•‡∏±‡∏á,‡∏õ‡∏£‡∏±‡∏ö‡∏™‡∏ï‡πá‡∏≠‡∏Å‡∏´‡∏•‡∏±‡∏á‡∏ï‡∏£‡∏ß‡∏à‡∏ô‡∏±‡∏ö"]:
            return get_answer_by_intent("wh_stock_adjust_from_count")
        if q in ["4", "‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏´‡∏ô‡∏µ‡πâ / ‡πÅ‡∏à‡πâ‡∏á‡∏£‡∏±‡∏ö","ap invoice receiving","‡∏ï‡∏±‡πâ‡∏á‡∏´‡∏ô‡∏µ‡πâ","‡πÅ‡∏à‡πâ‡∏á‡∏£‡∏±‡∏ö","‡∏£‡∏±‡∏ö‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤","‡∏ï‡∏±‡πâ‡∏á‡∏£‡∏±‡∏ö‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤","‡∏£‡∏±‡∏ö‡∏Ç‡∏≠‡∏á‡πÄ‡∏Ç‡πâ‡∏≤","receipt ‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤"]:
            return get_answer_by_intent("wh_goods_receipt")
        if q in ["5", "‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏£‡∏±‡∏ö‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤","‡πÄ‡∏ä‡πá‡∏Ñ‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£‡∏£‡∏±‡∏ö‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤","‡∏î‡∏π‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏£‡∏±‡∏ö‡∏Ç‡∏≠‡∏á","goods receipt check","‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏£‡∏±‡∏ö‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤","‡πÄ‡∏ä‡πá‡∏Ñ‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£‡∏£‡∏±‡∏ö‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤","‡∏î‡∏π‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏£‡∏±‡∏ö‡∏Ç‡∏≠‡∏á"]:
            return get_answer_by_intent("wh_goods_receipt_check")
        if q in ["6", "‡∏•‡∏î‡∏´‡∏ô‡∏µ‡πâ","‡∏Ñ‡∏∑‡∏ô‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤","‡∏ó‡∏≥ credit memo","‡∏•‡∏î‡πÄ‡∏á‡∏¥‡∏ô‡∏•‡∏î‡∏Ç‡∏≠‡∏á","credit memo"]:
            return get_answer_by_intent("wh_credit_memo")
        if q in ["7", "‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£‡∏Ñ‡∏•‡∏±‡∏á‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤","‡∏î‡∏π‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£ warehouse","‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£‡∏Ñ‡∏•‡∏±‡∏á‡∏≠‡∏¢‡∏π‡πà‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡πÑ‡∏´‡∏ô","warehouse document status","document status","status"]:
            return get_answer_by_intent("wh_document_status")
    if current_topic == "it_root":
        if q in ["1", "‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏´‡∏ô‡πà‡∏ß‡∏¢‡∏ô‡∏±‡∏ö","UOM Setup","Unit of Measure","‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏´‡∏ô‡πà‡∏ß‡∏¢‡∏ô‡∏±‡∏ö","‡∏´‡∏ô‡πà‡∏ß‡∏¢‡∏ô‡∏±‡∏ö","uom"]:
            current_topic = "uom_setup"
            return (
                "‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏´‡∏ô‡πà‡∏ß‡∏¢‡∏ô‡∏±‡∏ö  (UOM Setup):\n\n"
                "1) ‡∏ß‡∏¥‡∏ò‡∏µ‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ UOM Class\n"
                "2) ‡∏ß‡∏¥‡∏ò‡∏µ‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ UOM\n\n"
                "üëâ ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏û‡∏¥‡∏°‡∏û‡πå‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏•‡∏Ç‡∏´‡∏£‡∏∑‡∏≠‡∏Ñ‡∏≥‡∏¢‡πà‡∏≠‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÄ‡∏°‡∏ô‡∏π"
                )
        if q in ["2", "‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤","Part","Part Setup","‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤","‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤"]:
            current_topic = "part_setup"
            return (
                "‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ (Part Setup):\n\n"
                "1) ‡∏ß‡∏¥‡∏ò‡∏µ‡∏Å‡∏≤‡∏£‡∏™‡∏£‡πâ‡∏≤‡∏á / ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç Part\n"
                "2) ‡∏ß‡∏¥‡∏ò‡∏µ‡∏Å‡∏≤‡∏£‡∏Å‡∏≥‡∏´‡∏ô‡∏î Part Class\n\n"
                "üëâ ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏û‡∏¥‡∏°‡∏û‡πå‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏•‡∏Ç‡∏´‡∏£‡∏∑‡∏≠‡∏Ñ‡∏≥‡∏¢‡πà‡∏≠‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÄ‡∏°‡∏ô‡∏π"
                )
        if q in ["3","‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤","Customer","Customer Setup","‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤","‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤","‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤" ]:
            current_topic = "customer_setup"
            return (
                "‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤ (Customer Setup):\n\n"
                "1) ‡∏ß‡∏¥‡∏ò‡∏µ‡∏Å‡∏≤‡∏£‡∏™‡∏£‡πâ‡∏≤‡∏á Customer\n"
                "2) ‡∏ß‡∏¥‡∏ò‡∏µ‡∏Å‡∏≤‡∏£‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• Customer\n\n"
                "üëâ ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏û‡∏¥‡∏°‡∏û‡πå‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏•‡∏Ç‡∏´‡∏£‡∏∑‡∏≠‡∏Ñ‡∏≥‡∏¢‡πà‡∏≠‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÄ‡∏°‡∏ô‡∏π"
                )
        if q in ["4","‡∏ú‡∏π‡πâ‡∏Ç‡∏≤‡∏¢","Supplier","Supplier Setup","‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏ú‡∏π‡πâ‡∏Ç‡∏≤‡∏¢","‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏ú‡∏π‡πâ‡∏Ç‡∏≤‡∏¢","‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏ú‡∏π‡πâ‡∏Ç‡∏≤‡∏¢" ]:
            current_topic = "supplier_setup"
            return (
                "‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ú‡∏π‡πâ‡∏Ç‡∏≤‡∏¢ (Supplier Setup):\n\n"
                "1) ‡∏ß‡∏¥‡∏ò‡∏µ‡∏Å‡∏≤‡∏£‡∏™‡∏£‡πâ‡∏≤‡∏á Supplier\n"
                "2) ‡∏ß‡∏¥‡∏ò‡∏µ‡∏Å‡∏≤‡∏£‡∏™‡∏£‡πâ‡∏≤‡∏á Supplier Group\n"
                "3) ‡∏ß‡∏¥‡∏ò‡∏µ‡∏Å‡∏≤‡∏£‡∏Å‡∏≥‡∏´‡∏ô‡∏î Supplier Price List\n\n"
                "üëâ ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏û‡∏¥‡∏°‡∏û‡πå‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏•‡∏Ç‡∏´‡∏£‡∏∑‡∏≠‡∏Ñ‡∏≥‡∏¢‡πà‡∏≠‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÄ‡∏°‡∏ô‡∏π"
                )
        if q in ["5","‡∏ù‡πà‡∏≤‡∏¢‡∏à‡∏±‡∏î‡∏ã‡∏∑‡πâ‡∏≠","Purchasing","Purchasing Setup","‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏ù‡πà‡∏≤‡∏¢‡∏à‡∏±‡∏î‡∏ã‡∏∑‡πâ‡∏≠","‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏ù‡πà‡∏≤‡∏¢‡∏à‡∏±‡∏î‡∏ã‡∏∑‡πâ‡∏≠" ]:
            current_topic = "purchasing_setup"
            return (
                "‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏ù‡πà‡∏≤‡∏¢‡∏à‡∏±‡∏î‡∏ã‡∏∑‡πâ‡∏≠ (Purchasing Setup):\n\n"
                "1) ‡∏ß‡∏¥‡∏ò‡∏µ‡∏Å‡∏≤‡∏£‡∏™‡∏£‡πâ‡∏≤‡∏á Buyer\n"
                "2) ‡∏ß‡∏¥‡∏ò‡∏µ‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ Ship Via\n"
                "3) ‡∏ß‡∏¥‡∏ò‡∏µ‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ Purchasing Terms\n"
                "4) ‡∏ß‡∏¥‡∏ò‡∏µ‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ Incoterm\n\n"
                "üëâ ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏û‡∏¥‡∏°‡∏û‡πå‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏•‡∏Ç‡∏´‡∏£‡∏∑‡∏≠‡∏Ñ‡∏≥‡∏¢‡πà‡∏≠‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÄ‡∏°‡∏ô‡∏π"
                )
        if q in ["6","‡πÉ‡∏ö‡∏Ç‡∏≠‡∏ã‡∏∑‡πâ‡∏≠","Requisition","‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡πÉ‡∏ö‡∏Ç‡∏≠‡∏ã‡∏∑‡πâ‡∏≠","Requisition Action","‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£ requisition" ]:
            return get_answer_by_intent("it_requisition_action")
                
        if q in ["7","User Security","‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô","‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô","‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ" ]:
            current_topic = "user_security"
            return (
                "‡∏Å‡∏≤‡∏£‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô (User Security):\n\n"
                "1) ‡∏ß‡∏¥‡∏ò‡∏µ‡∏Å‡∏≤‡∏£‡∏™‡∏£‡πâ‡∏≤‡∏á User\n"
                "2) ‡∏ß‡∏¥‡∏ò‡∏µ‡∏Å‡∏≤‡∏£‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô\n\n"

                "üëâ ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏û‡∏¥‡∏°‡∏û‡πå‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏•‡∏Ç‡∏´‡∏£‡∏∑‡∏≠‡∏Ñ‡∏≥‡∏¢‡πà‡∏≠‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÄ‡∏°‡∏ô‡∏π"
                )
        if q in ["8","Fiscal Calendar","‡∏õ‡∏è‡∏¥‡∏ó‡∏¥‡∏ô‡∏ö‡∏±‡∏ç‡∏ä‡∏µ" ]:
            return get_answer_by_intent("it_fiscal_calendar_setup")
    if current_topic == "finance_root":
        if q in ["1","‡∏•‡∏π‡∏Å‡∏´‡∏ô‡∏µ‡πâ","AR Customer Setup","‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏•‡∏π‡∏Å‡∏´‡∏ô‡∏µ‡πâ","‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏•‡∏π‡∏Å‡∏´‡∏ô‡∏µ‡πâ" ]:
            current_topic = "finance_ar_customer_setup"
            return (
                "‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏•‡∏π‡∏Å‡∏´‡∏ô‡∏µ‡πâ (AR Customer Setup):\n\n"
                "1) ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏ï‡∏±‡∏î‡∏à‡∏≥‡∏´‡∏ô‡πà‡∏≤‡∏¢ / ‡∏õ‡∏£‡∏±‡∏ö‡∏õ‡∏£‡∏∏‡∏á‡∏•‡∏π‡∏Å‡∏´‡∏ô‡∏µ‡πâ (AR Write Off & Adjustment)\n"
                "2) ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£‡∏•‡∏π‡∏Å‡∏´‡∏ô‡∏µ‡πâ\n\n"
                "üëâ ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏û‡∏¥‡∏°‡∏û‡πå‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏•‡∏Ç‡∏´‡∏£‡∏∑‡∏≠‡∏Ñ‡∏≥‡∏¢‡πà‡∏≠‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÄ‡∏°‡∏ô‡∏π"
                )
        if q in ["2","‡πÄ‡∏à‡πâ‡∏≤‡∏´‡∏ô‡∏µ‡πâ","AP Supplier Setup","‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡πÄ‡∏à‡πâ‡∏≤‡∏´‡∏ô‡∏µ‡πâ","‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡πÄ‡∏à‡πâ‡∏≤‡∏´‡∏ô‡∏µ‡πâ" ]:
            current_topic = "finance_ap_supplier_setup"
            return (
                "‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏à‡πâ‡∏≤‡∏´‡∏ô‡∏µ‡πâ (AP Supplier Setup):\n\n"
                "1) ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏ï‡∏±‡πâ‡∏á‡∏´‡∏ô‡∏µ‡πâ‡∏Å‡∏≤‡∏£‡∏ä‡∏≥‡∏£‡∏∞‡∏Ñ‡πà‡∏≤‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏•‡πà‡∏ß‡∏á‡∏´‡∏ô‡πâ‡∏≤\n"
                "2) ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÉ‡∏ö‡∏°‡∏±‡∏î‡∏à‡∏≥\n"
                "3) ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÉ‡∏ö‡∏•‡∏î‡∏´‡∏ô‡∏µ‡πâ\n"
                "4) ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÉ‡∏ö‡∏ß‡∏≤‡∏á‡∏ö‡∏¥‡∏•\n\n"
                
                "üëâ ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏û‡∏¥‡∏°‡∏û‡πå‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏•‡∏Ç‡∏´‡∏£‡∏∑‡∏≠‡∏Ñ‡∏≥‡∏¢‡πà‡∏≠‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÄ‡∏°‡∏ô‡∏π"
            )   
        if q in ["3","‡∏ò‡∏ô‡∏≤‡∏Ñ‡∏≤‡∏£","Bank Management","‡∏Å‡∏≤‡∏£‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏ò‡∏ô‡∏≤‡∏Ñ‡∏≤‡∏£","‡∏Å‡∏≤‡∏£‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏ò‡∏ô‡∏≤‡∏Ñ‡∏≤‡∏£" ]:
            current_topic = "finance_bank_management"
            return (
                "‡∏Å‡∏≤‡∏£‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏ò‡∏ô‡∏≤‡∏Ñ‡∏≤‡∏£ (Bank Management):\n\n"
                "1) ‡∏õ‡∏£‡∏±‡∏ö‡∏õ‡∏£‡∏∏‡∏á‡∏¢‡∏≠‡∏î‡∏ö‡∏±‡∏ç‡∏ä‡∏µ‡∏ò‡∏ô‡∏≤‡∏Ñ‡∏≤‡∏£ (Bank Adjustment Entry)\n"
                "2) ‡πÇ‡∏≠‡∏ô‡πÄ‡∏á‡∏¥‡∏ô‡∏£‡∏∞‡∏´‡∏ß‡πà‡∏≤‡∏á‡∏ò‡∏ô‡∏≤‡∏Ñ‡∏≤‡∏£ (Bank Fund Transfer)\n"
                "3) ‡∏Å‡∏£‡∏∞‡∏ó‡∏ö‡∏¢‡∏≠‡∏î‡∏ö‡∏±‡∏ç‡∏ä‡∏µ‡∏ò‡∏ô‡∏≤‡∏Ñ‡∏≤‡∏£ (Bank Reconciliation)\n\n"
                "üëâ ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏û‡∏¥‡∏°‡∏û‡πå‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏•‡∏Ç‡∏´‡∏£‡∏∑‡∏≠‡∏Ñ‡∏≥‡∏¢‡πà‡∏≠‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÄ‡∏°‡∏ô‡∏π"
            )
        if q in ["4","‡∏†‡∏≤‡∏©‡∏µ‡∏°‡∏π‡∏•‡∏Ñ‡πà‡∏≤‡πÄ‡∏û‡∏¥‡πà‡∏°","VAT Setup","‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏†‡∏≤‡∏©‡∏µ‡∏°‡∏π‡∏•‡∏Ñ‡πà‡∏≤‡πÄ‡∏û‡∏¥‡πà‡∏°","‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏†‡∏≤‡∏©‡∏µ‡∏°‡∏π‡∏•‡∏Ñ‡πà‡∏≤‡πÄ‡∏û‡∏¥‡πà‡∏°" ]:
            current_topic = "finance_vat_setup"
            return (
                "‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏†‡∏≤‡∏©‡∏µ‡∏°‡∏π‡∏•‡∏Ñ‡πà‡∏≤‡πÄ‡∏û‡∏¥‡πà‡∏° (VAT Setup):\n\n"
                "1) ‡∏à‡∏±‡∏î‡∏ó‡∏≥‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô‡∏†‡∏≤‡∏©‡∏µ‡∏ã‡∏∑‡πâ‡∏≠\n"
                "2) ‡∏Å‡∏•‡∏±‡∏ö‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏†‡∏≤‡∏©‡∏µ‡∏ã‡∏∑‡πâ‡∏≠‡∏£‡∏≠‡πÉ‡∏ö‡∏Å‡∏≥‡∏Å‡∏±‡∏ö\n\n"
                "3) ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏†‡∏≤‡∏©‡∏µ\n\n"
                "üëâ ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏û‡∏¥‡∏°‡∏û‡πå‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏•‡∏Ç‡∏´‡∏£‡∏∑‡∏≠‡∏Ñ‡∏≥‡∏¢‡πà‡∏≠‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÄ‡∏°‡∏ô" 
            )
        if q in ["5","‡∏ö‡∏±‡∏ç‡∏ä‡∏µ‡πÅ‡∏¢‡∏Å‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó","General Ledger","GL","‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏ö‡∏±‡∏ç‡∏ä‡∏µ‡πÅ‡∏¢‡∏Å‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó","‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏ö‡∏±‡∏ç‡∏ä‡∏µ‡πÅ‡∏¢‡∏Å‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó" ]:
            current_topic = "finance_general_ledger_gl"
            return (
                "‡∏ö‡∏±‡∏ç‡∏ä‡∏µ‡πÅ‡∏¢‡∏Å‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó (General Ledger : GL):\n\n"
                "1) ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏ö‡∏±‡∏ç‡∏ä‡∏µ‡πÅ‡∏¢‡∏Å‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó\n"
                "2) ‡∏õ‡∏£‡∏±‡∏ö‡∏õ‡∏£‡∏∏‡∏á‡∏ö‡∏±‡∏ç‡∏ä‡∏µ‡∏≠‡∏±‡∏ï‡∏£‡∏≤‡πÅ‡∏•‡∏Å‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô (Currency Revaluation)\n"
                "3) ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ö‡∏±‡∏ç‡∏ä‡∏µ‡πÅ‡∏¢‡∏Å‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó\n\n"
                "üëâ ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏û‡∏¥‡∏°‡∏û‡πå‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏•‡∏Ç‡∏´‡∏£‡∏∑‡∏≠‡∏Ñ‡∏≥‡∏¢‡πà‡∏≠‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÄ‡∏°‡∏ô‡∏π"
            )
        if q in ["6","‡∏™‡∏°‡∏∏‡∏î‡∏£‡∏≤‡∏¢‡∏ß‡∏±‡∏ô‡∏ó‡∏±‡πà‡∏ß‡πÑ‡∏õ","Journal Entry","‡∏Å‡∏≤‡∏£‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏™‡∏°‡∏∏‡∏î‡∏£‡∏≤‡∏¢‡∏ß‡∏±‡∏ô‡∏ó‡∏±‡πà‡∏ß‡πÑ‡∏õ","‡∏Å‡∏≤‡∏£‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏™‡∏°‡∏∏‡∏î‡∏£‡∏≤‡∏¢‡∏ß‡∏±‡∏ô‡∏ó‡∏±‡πà‡∏ß‡πÑ‡∏õ" ]:
            current_topic = "finance_journal_entry"
            return (
                "‡∏™‡∏°‡∏∏‡∏î‡∏£‡∏≤‡∏¢‡∏ß‡∏±‡∏ô‡∏ó‡∏±‡πà‡∏ß‡πÑ‡∏õ (Journal Entry):\n\n"
                "1) ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏™‡∏°‡∏∏‡∏î‡∏£‡∏≤‡∏¢‡∏ß‡∏±‡∏ô‡∏ó‡∏±‡πà‡∏ß‡πÑ‡∏õ\n"
                "2) ‡∏Å‡∏•‡∏±‡∏ö‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏†‡∏≤‡∏©‡∏µ‡∏ã‡∏∑‡πâ‡∏≠‡∏£‡∏≠‡πÉ‡∏ö‡∏Å‡∏≥‡∏Å‡∏±‡∏ö\n"
                "3) ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö / Post ‡∏™‡∏°‡∏∏‡∏î‡∏£‡∏≤‡∏¢‡∏ß‡∏±‡∏ô\n\n"
                "üëâ ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏û‡∏¥‡∏°‡∏û‡πå‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏•‡∏Ç‡∏´‡∏£‡∏∑‡∏≠‡∏Ñ‡∏≥‡∏¢‡πà‡∏≠‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÄ‡∏°‡∏ô‡∏π"
            )
    if current_topic == "hr_root":
        if q in ["1","‡πÄ‡∏ö‡∏¥‡∏Å - ‡∏£‡∏±‡∏ö‡∏Ñ‡∏∑‡∏ô‡∏ß‡∏±‡∏™‡∏î‡∏∏‡∏™‡∏¥‡πâ‡∏ô‡πÄ‡∏õ‡∏•‡∏∑‡∏≠‡∏á","Material Requisition","‡πÄ‡∏ö‡∏¥‡∏Å‡∏ß‡∏±‡∏™‡∏î‡∏∏","‡∏£‡∏±‡∏ö‡∏Ñ‡∏∑‡∏ô‡∏ß‡∏±‡∏™‡∏î‡∏∏","‡πÄ‡∏ö‡∏¥‡∏Å - ‡∏£‡∏±‡∏ö‡∏Ñ‡∏∑‡∏ô‡∏ß‡∏±‡∏™‡∏î‡∏∏‡∏™‡∏¥‡πâ‡∏ô‡πÄ‡∏õ‡∏•‡∏∑‡∏≠‡∏á" ]:
            current_topic = "hr_material_requisition"
            return (
                "‡∏Å‡∏≤‡∏£‡πÄ‡∏ö‡∏¥‡∏Å - ‡∏£‡∏±‡∏ö‡∏Ñ‡∏∑‡∏ô‡∏ß‡∏±‡∏™‡∏î‡∏∏‡∏™‡∏¥‡πâ‡∏ô‡πÄ‡∏õ‡∏•‡∏∑‡∏≠‡∏á:\n\n"
                "1) ‡∏ß‡∏¥‡∏ò‡∏µ‡∏Å‡∏≤‡∏£‡πÄ‡∏ö‡∏¥‡∏Å‡∏ß‡∏±‡∏™‡∏î‡∏∏‡∏™‡∏¥‡πâ‡∏ô‡πÄ‡∏õ‡∏•‡∏∑‡∏≠‡∏á\n"
                "2) ‡∏ß‡∏¥‡∏ò‡∏µ‡∏Å‡∏≤‡∏£‡∏£‡∏±‡∏ö‡∏Ñ‡∏∑‡∏ô‡∏ß‡∏±‡∏™‡∏î‡∏∏‡∏™‡∏¥‡πâ‡∏ô‡πÄ‡∏õ‡∏•‡∏∑‡∏≠‡∏á\n\n"
                "üëâ ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏û‡∏¥‡∏°‡∏û‡πå‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏•‡∏Ç‡∏´‡∏£‡∏∑‡∏≠‡∏Ñ‡∏≥‡∏¢‡πà‡∏≠‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÄ‡∏°‡∏ô‡∏π"
            )
        if q in ["2","‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÅ‡∏•‡∏∞‡∏™‡∏ï‡πá‡∏≠‡∏Å","‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤","‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏™‡∏ï‡πá‡∏≠‡∏Å","‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÅ‡∏•‡∏∞‡∏™‡∏ï‡πá‡∏≠‡∏Å" ]:
            current_topic = "hr_item_stock_check"
            return (
                "‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÅ‡∏•‡∏∞‡∏™‡∏ï‡πá‡∏≠‡∏Å:\n\n"
                "1) ‡∏ß‡∏¥‡∏ò‡∏µ‡∏Å‡∏≤‡∏£‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤\n"
                "2) ‡∏ß‡∏¥‡∏ò‡∏µ‡∏Å‡∏≤‡∏£‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏™‡∏ï‡πá‡∏≠‡∏Å‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤\n\n"
                "üëâ ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏û‡∏¥‡∏°‡∏û‡πå‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏•‡∏Ç‡∏´‡∏£‡∏∑‡∏≠‡∏Ñ‡∏≥‡∏¢‡πà‡∏≠‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÄ‡∏°‡∏ô‡∏π"
            )
        if q in ["3","‡∏Å‡∏≤‡∏£‡πÇ‡∏≠‡∏ô‡∏¢‡πâ‡∏≤‡∏¢‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤","Item Transfer","‡πÇ‡∏≠‡∏ô‡∏¢‡πâ‡∏≤‡∏¢‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤","‡∏Å‡∏≤‡∏£‡πÇ‡∏≠‡∏ô‡∏¢‡πâ‡∏≤‡∏¢‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤" ]:
            return get_answer_by_intent("hr_transfer_item")

            
    

    
    # ===== BOM MENU =====
            
    if current_topic == "bom" and q in ERP_BOM_INTENT:
        return get_answer_by_intent(ERP_BOM_INTENT[q])
    if current_topic == "cost_rollup" and q in ERP_cost_rollup_INTENT:
        return get_answer_by_intent(ERP_cost_rollup_INTENT[q])
    if current_topic == "standard_cost" and q in ERP_standard_cost_INTENT:
        return get_answer_by_intent(ERP_standard_cost_INTENT[q])
    if current_topic == "adjust_cost" and q in ERP_adjust_cost_INTENT:
        return get_answer_by_intent(ERP_adjust_cost_INTENT[q])
    if current_topic == "price_list" and q in ERP_price_list_INTENT:
        return get_answer_by_intent(ERP_price_list_INTENT[q])
    if  current_topic == "bom_check_status" and q in ERP_bom_check_status_INTENT:
        return get_answer_by_intent(ERP_bom_check_status_INTENT[q])
    if current_topic == "proforma_invoice" and q in ERP_proforma_invoice_INTENT:
        return get_answer_by_intent(ERP_proforma_invoice_INTENT[q])
    # ===== SALES MENU =====
    if current_topic == "sales_order" and q in ERP_sales_order_INTENT:
        return get_answer_by_intent(ERP_sales_order_INTENT[q])
    if current_topic == "rma" and q in ERP_rma_INTENT:
        return get_answer_by_intent(ERP_rma_INTENT[q])
    if current_topic == "customer_complaint" and q in ERP_customer_complaint_INTENT:
        return get_answer_by_intent(ERP_customer_complaint_INTENT[q])
    # ===== IT MENU =====
    if current_topic == "uom_setup" and q in ERP_uom_setup_INTENT:
        return get_answer_by_intent(ERP_uom_setup_INTENT[q])
    if current_topic == "part_setup" and q in ERP_part_setup_INTENT:
        return get_answer_by_intent(ERP_part_setup_INTENT[q])
    if current_topic == "customer_setup" and q in ERP_customer_setup_INTENT:
        return get_answer_by_intent(ERP_customer_setup_INTENT[q])
    if current_topic == "supplier_setup" and q in ERP_supplier_setup_INTENT:
        return get_answer_by_intent(ERP_supplier_setup_INTENT[q])
    if current_topic == "purchasing_setup" and q in ERP_it_purchasing_terms_setup:
        return get_answer_by_intent(ERP_it_purchasing_terms_setup[q])
    if current_topic == "user_security" and q in ERP_user_security_INTENT:
        return get_answer_by_intent(ERP_user_security_INTENT[q])
    # ===== FINANCE MENU =====
    if current_topic == "finance_ar_customer_setup" and q in ERP_finance_ar_customer_setup_INTENT:
        return get_answer_by_intent(ERP_finance_ar_customer_setup_INTENT[q])
    if current_topic == "finance_ap_supplier_setup" and q in ERP_finance_ap_supplier_setup_INTENT:
        return get_answer_by_intent(ERP_finance_ap_supplier_setup_INTENT[q])
    if current_topic == "finance_bank_management" and q in ERP_finance_bank_management_INTENT:
        return get_answer_by_intent(ERP_finance_bank_management_INTENT[q])
    if current_topic == "finance_vat_setup" and q in ERP_finance_vat_setup_INTENT:
        return get_answer_by_intent(ERP_finance_vat_setup_INTENT[q])
    if current_topic == "finance_general_ledger_gl" and q in ERP_finance_general_ledger_gl_INTENT:
        return get_answer_by_intent(ERP_finance_general_ledger_gl_INTENT[q])
    if current_topic == "finance_journal_entry" and q in ERP_finance_journal_entry_INTENT:
        return get_answer_by_intent(ERP_finance_journal_entry_INTENT[q])
    # ===== HR MENU =====
    if current_topic == "hr_material_requisition" and q in ERP_hr_material_requisition_INTENT:
        return get_answer_by_intent(ERP_hr_material_requisition_INTENT[q])
    if current_topic == "hr_item_stock_check" and q in ERP_hr_item_stock_check_INTENT:
        return get_answer_by_intent(ERP_hr_item_stock_check_INTENT[q])
    

    


    

    
    return None

# =========================
# MAIN ENTRY
# =========================
def ask_it(text: str) -> str:
    global current_topic
    q = text.strip().lower()


    # MENU
    erp = handle_erp(q)
    if erp:
        log_interaction(text, q, current_topic, "menu", None, erp)
        return format_answer(erp)

    # RESET CONTEXT IF NOT ERP
    if not is_erp_related(q):
        current_topic = None

    # ===== DIGIT GUARD (‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ï‡∏≤‡∏° requirement ‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î) =====
    if q.isdigit() and current_topic is None:
        return format_answer(
            "‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏Ç‡πâ‡∏≤‡πÄ‡∏°‡∏ô‡∏π‡∏Å‡πà‡∏≠‡∏ô\n"
            "‡∏û‡∏¥‡∏°‡∏û‡πå Menu , ERP ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô Menu ERP ‡∏Ñ‡∏£‡∏±‡∏öüôè"
        )

    # FORCE CONTEXT (‡∏Ç‡∏≠‡∏á‡πÄ‡∏î‡∏¥‡∏°)
    if "pr" in q:
        current_topic = "pr"
    elif "po" in q:
        current_topic = "po"
    elif "bom" in q or "bill of material" in q:
        current_topic = "bom"

    # üîí PO CONTEXT GUARD (‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç‡∏°‡∏≤‡∏Å)
    if current_topic == "po" and any(w in q for w in ["‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å", "‡∏•‡∏ö", "‡∏ñ‡∏≠‡∏ô", "cancel", "void"]):
        ans = get_answer_by_intent("erp_po_cancel")
        log_interaction(text, q, "po", "erp", "erp_po_cancel", ans)
        return format_answer(ans)

    # PR LOGIC
    if current_topic == "pr":
        if any(w in q for w in ["‡πÄ‡∏õ‡∏¥‡∏î", "‡∏™‡∏£‡πâ‡∏≤‡∏á"]):
            return format_answer(get_answer_by_intent("erp_pr_create"))
        if any(w in q for w in ["‡πÅ‡∏Å‡πâ", "‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç"]):
            return format_answer(get_answer_by_intent("erp_pr_edit"))
        if any(w in q for w in ["‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å", "‡∏•‡∏ö"]):
            return format_answer(get_answer_by_intent("erp_pr_cancel"))
    if current_topic == "po":
        if any(w in q for w in ["‡∏´‡∏•‡∏≤‡∏¢‡∏á‡∏ß‡∏î", "‡πÅ‡∏ö‡πà‡∏á"]):
            return format_answer(get_answer_by_intent("erp_po_create_split_delivery"))
        if any(w in q for w in ["‡∏¢‡πâ‡∏≠‡∏ô‡∏´‡∏•‡∏±‡∏á"]):
            return format_answer(get_answer_by_intent("erp_po_create‡∏¢‡πâ‡∏≠‡∏ô‡∏´‡∏•‡∏±‡∏á"))
        if any(w in q for w in ["‡πÄ‡∏õ‡∏¥‡∏î", "‡∏™‡∏£‡πâ‡∏≤‡∏á"]):
            return format_answer(get_answer_by_intent("erp_po_create"))
        if any(w in q for w in ["‡πÅ‡∏Å‡πâ", "‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç"]):
            return format_answer(get_answer_by_intent("erp_po_edit"))
        if any(w in q for w in ["‡∏à‡πà‡∏≤‡∏¢", "‡πÄ‡∏Ñ‡∏£‡∏î‡∏¥‡∏ï"]):
            return format_answer(get_answer_by_intent("erp_po_edit_payment_term"))
        if any(w in q for w in ["‡πÄ‡∏û‡∏¥‡πà‡∏°"]):
            return format_answer(get_answer_by_intent("erp_po_reject_add_item"))
        if any(w in q for w in ["‡πÅ‡∏ô‡∏ö","‡πÑ‡∏ü‡∏•‡πå","‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£"]):
            return format_answer(get_answer_by_intent("erp_po_with_attachment"))
        if any(w in q for w in ["‡∏õ‡∏¥‡∏î","‡∏•‡∏ö"]):
            return format_answer(get_answer_by_intent("erp_po_close"))
        if any(w in q for w in ["‡πÄ‡∏õ‡∏£‡∏µ‡∏¢‡∏ö‡πÄ‡∏ó‡∏µ‡∏¢‡∏ö", "‡∏£‡∏≤‡∏Ñ‡∏≤","‡πÄ‡∏õ‡∏£‡∏µ‡∏¢‡∏ö‡πÄ‡∏ó‡∏µ‡∏¢‡∏ö‡∏£‡∏≤‡∏Ñ‡∏≤","‡πÄ‡∏ó‡∏µ‡∏¢‡∏ö"]):
            return format_answer(get_answer_by_intent("erp_po_compare_price"))

    # PO LOGIC
    if current_topic == "po":
        mapping = [
            (["‡∏´‡∏•‡∏≤‡∏¢‡∏á‡∏ß‡∏î", "‡πÅ‡∏ö‡πà‡∏á"], "erp_po_create_split_delivery"),
            (["‡∏¢‡πâ‡∏≠‡∏ô‡∏´‡∏•‡∏±‡∏á"], "erp_po_create‡∏¢‡πâ‡∏≠‡∏ô‡∏´‡∏•‡∏±‡∏á"),
            (["‡πÄ‡∏õ‡∏¥‡∏î", "‡∏™‡∏£‡πâ‡∏≤‡∏á"], "erp_po_create"),
            (["‡πÅ‡∏Å‡πâ", "‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç"], "erp_po_edit"),
            (["‡∏à‡πà‡∏≤‡∏¢", "‡πÄ‡∏Ñ‡∏£‡∏î‡∏¥‡∏ï"], "erp_po_edit_payment_term"),
            (["‡πÄ‡∏û‡∏¥‡πà‡∏°"], "erp_po_reject_add_item"),
            (["‡πÅ‡∏ô‡∏ö","‡πÑ‡∏ü‡∏•‡πå","‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£"], "erp_po_with_attachment"),
            (["‡∏õ‡∏¥‡∏î","‡∏•‡∏ö"], "erp_po_close"),
            (["‡πÄ‡∏õ‡∏£‡∏µ‡∏¢‡∏ö‡πÄ‡∏ó‡∏µ‡∏¢‡∏ö", "‡∏£‡∏≤‡∏Ñ‡∏≤","‡πÄ‡∏õ‡∏£‡∏µ‡∏¢‡∏ö‡πÄ‡∏ó‡∏µ‡∏¢‡∏ö‡∏£‡∏≤‡∏Ñ‡∏≤","‡πÄ‡∏ó‡∏µ‡∏¢‡∏ö"], "erp_po_compare_price"),
        ]
        for keys, intent in mapping:
            if any(k in q for k in keys):
                return format_answer(get_answer_by_intent(intent))
    # ===== COST ROLLUP LOGIC (‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏Ñ‡∏∏‡∏¢‡∏ï‡πà‡∏≠‡πÄ‡∏ô‡∏∑‡πà‡∏≠‡∏á) =====
    if current_topic == "cost_rollup":
    
        if any(w in q for w in ["‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì", "run", "execute", "start","launch","begin","calculate", "‡∏¢‡∏±‡∏á‡πÑ‡∏á", "‡∏ß‡∏¥‡∏ò‡∏µ", "how", "‡∏ó‡∏≥‡∏≠‡∏¢‡πà‡∏≤‡∏á‡πÑ‡∏£", "‡∏ó‡∏≥‡πÑ‡∏á"]):
            return format_answer(get_answer_by_intent("rollup_cost_run"))
        if any(w in q for w in ["‡∏ú‡∏•", "result", "output","‡∏î‡∏π‡∏ú‡∏•","check result","view result"]):
            return format_answer(get_answer_by_intent("rollup_cost_check_result"))
        if any(w in q for w in ["‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö", "check","‡∏î‡∏π","view","status","‡πÄ‡∏ä‡πá‡∏Ñ","‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞","‡∏ï‡∏£‡∏ß‡∏à"]):
            return format_answer(get_answer_by_intent("standard_cost_check"))
        if any(w in q for w in ["‡∏õ‡∏±‡∏ç‡∏´‡∏≤", "issue","problem","error","trouble","‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î"]):
            return format_answer(get_answer_by_intent("rollup_cost_issue"))
        if any(w in q for w in ["‡πÄ‡∏á‡∏∑‡πà‡∏≠‡∏ô‡πÑ‡∏Ç", "prerequisite","condition","requirement","precondition"]):
            return format_answer(get_answer_by_intent("rollup_cost_prerequisite"))
        
        
        
        
        for keys, intent in mapping:
            if any(k in q for k in keys):
                return format_answer(get_answer_by_intent(intent))
        # ===== BOM LOGIC (‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏Ñ‡∏∏‡∏¢‡∏ï‡πà‡∏≠‡πÄ‡∏ô‡∏∑‡πà‡∏≠‡∏á) =====
    if current_topic == "bom":
        if any(w in q for w in ["‡∏™‡∏£‡πâ‡∏≤‡∏á", "‡πÄ‡∏õ‡∏¥‡∏î", "new", "create","make","build","add","‡∏ï‡∏±‡πâ‡∏á","‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤"]):
            return format_answer(get_answer_by_intent("bom_create"))

        if any(w in q for w in ["‡πÅ‡∏Å‡πâ", "‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç", "‡∏õ‡∏£‡∏±‡∏ö", "‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô", "edit","modify","change"]):
            return format_answer(get_answer_by_intent("bom_edit"))
        if any(w in q for w in ["‡πÄ‡∏û‡∏¥‡πà‡∏°", "‡∏ß‡∏±‡∏ï‡∏ñ‡∏∏‡∏î‡∏¥‡∏ö", "material"]):
            return format_answer(get_answer_by_intent("bom_add_material"))

        if any(w in q for w in ["parent", "‡∏à‡∏≥‡∏ô‡∏ß‡∏ô", "qty", "quantity", "‡∏õ‡∏£‡∏±‡∏ö‡∏à‡∏≥‡∏ô‡∏ß‡∏ô", "‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏à‡∏≥‡∏ô‡∏ß‡∏ô", "‡πÅ‡∏Å‡πâ‡∏à‡∏≥‡∏ô‡∏ß‡∏ô"]):
            return format_answer(get_answer_by_intent("bom_qty_parent"))

        if any(w in q for w in ["approve", "‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥", "‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥‡πÅ‡∏•‡πâ‡∏ß", "‡∏ú‡πà‡∏≤‡∏ô", "‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥‡πÑ‡∏õ", "‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥‡πÄ‡∏™‡∏£‡πá‡∏à"]):
            return format_answer(get_answer_by_intent("bom_approve"))

        if any(w in q for w in ["‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞", "status", "‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞", "‡∏î‡∏π‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞", "‡πÄ‡∏ä‡πá‡∏Ñ‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞", "‡πÄ‡∏ä‡πá‡∏Ñ‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞ bom", "‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞ bom", "‡∏î‡∏π‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞ bom"   ]):
            return format_answer(get_answer_by_intent("bom_check_status"))

        if any(w in q for w in ["revision", "‡πÅ‡∏Å‡πâ‡πÄ‡∏û‡∏¥‡πà‡∏°", "‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡πÄ‡∏û‡∏¥‡πà‡∏°", "‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏°",  "‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡πÉ‡∏´‡∏°‡πà"]):
            return format_answer(get_answer_by_intent("bom_revision_required"))
        if any(w in q for w in ["‡πÑ‡∏°‡πà‡∏ú‡πà‡∏≤‡∏ô", "reject", "issue", "‡∏õ‡∏±‡∏ç‡∏´‡∏≤", "‡πÑ‡∏°‡πà‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥"]):
            return format_answer(get_answer_by_intent("bom_not_approved_issue"))
    # ===== STANDARD COST LOGIC (‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏Ñ‡∏∏‡∏¢‡∏ï‡πà‡∏≠‡πÄ‡∏ô‡∏∑‡πà‡∏≠‡∏á) =====
    if current_topic == "standard_cost":
        if any(w in q for w in ["‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö", "check","‡∏î‡∏π","view","status","‡πÄ‡∏ä‡πá‡∏Ñ","‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞","‡∏ï‡∏£‡∏ß‡∏à"]):
            return format_answer(get_answer_by_intent("standard_cost_check"))
        if any(w in q for w in ["‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î", "detail","‡πÅ‡∏¢‡∏Å‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£","item","‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£"]):
            return format_answer(get_answer_by_intent("standard_cost_detail"))
        if any(w in q for w in ["‡πÄ‡∏õ‡∏£‡∏µ‡∏¢‡∏ö‡πÄ‡∏ó‡∏µ‡∏¢‡∏ö", "compare","‡∏Å‡πà‡∏≠‡∏ô‡∏´‡∏•‡∏±‡∏á","before after"]):
            return format_answer(get_answer_by_intent("standard_cost_compare"))
        if any(w in q for w in ["load", "loaded", "‡πÇ‡∏´‡∏•‡∏î", "load ‡πÅ‡∏•‡πâ‡∏ß","load ‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢"]):
            return format_answer(get_answer_by_intent("standard_cost_loaded_check"))
        if any(w in q for w in ["‡∏õ‡∏±‡∏ç‡∏´‡∏≤", "issue","problem","error","trouble","‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î"]):
            return format_answer(get_answer_by_intent("standard_cost_issue"))
        if any(w in q for w in ["‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß‡∏Ç‡πâ‡∏≠‡∏á", "relation","‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß‡∏Å‡∏±‡∏ö","‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß‡∏Ç‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ö"]):
            return format_answer(get_answer_by_intent("standard_cost_relation"))
        if any(w in q for w in ["‡∏ô‡∏≥‡πÑ‡∏õ‡πÉ‡∏ä‡πâ‡∏ï‡πà‡∏≠", "next step","‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏ï‡πà‡∏≠‡πÑ‡∏õ","‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡∏ï‡πà‡∏≠"]):
            return format_answer(get_answer_by_intent("standard_cost_next_step"))
    # ===== ADJUST COST LOGIC (‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏Ñ‡∏∏‡∏¢‡∏ï‡πà‡∏≠‡πÄ‡∏ô‡∏∑‡πà‡∏≠‡∏á) =====
    if current_topic == "adjust_cost":
        if any(w in q for w in ["‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤", "product","item"]):
            return format_answer(get_answer_by_intent("cost_adjustment_product"))
        if any(w in q for w in ["‡∏ß‡∏±‡∏ï‡∏ñ‡∏∏‡∏î‡∏¥‡∏ö", "material"]):
            return format_answer(get_answer_by_intent("cost_adjustment_material"))
        if any(w in q for w in ["‡∏ú‡∏•‡∏Å‡∏£‡∏∞‡∏ó‡∏ö", "impact","stock","inventory","‡∏™‡∏ï‡πá‡∏≠‡∏Å"]):
            return format_answer(get_answer_by_intent("cost_adjustment_stock_impact"))
        if any(w in q for w in ["‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥", "history","log"]):
            return format_answer(get_answer_by_intent("cost_adjustment_history"))
        if any(w in q for w in ["‡∏õ‡∏±‡∏ç‡∏´‡∏≤", "issue","problem","error","trouble","‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î"]):
            return format_answer(get_answer_by_intent("cost_adjustment_issue"))
        if any(w in q for w in ["‡πÑ‡∏°‡πà‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÅ‡∏õ‡∏•‡∏á", "not change","‡∏ï‡πâ‡∏ô‡∏ó‡∏∏‡∏ô‡πÑ‡∏°‡πà‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÅ‡∏õ‡∏•‡∏á","‡∏ï‡πâ‡∏ô‡∏ó‡∏∏‡∏ô‡πÑ‡∏°‡πà‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô"]):
            return format_answer(get_answer_by_intent("cost_adjustment_not_change"))
    # ===== PRICE LIST LOGIC (‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏Ñ‡∏∏‡∏¢‡∏ï‡πà‡∏≠‡πÄ‡∏ô‡∏∑‡πà‡∏≠‡∏á) =====
    if current_topic == "price_list":
        if any(w in q for w in ["‡∏™‡∏£‡πâ‡∏≤‡∏á", "‡πÄ‡∏õ‡∏¥‡∏î", "new", "create","make","build","add","‡∏ï‡∏±‡πâ‡∏á","‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤"]):
            return format_answer(get_answer_by_intent("price_list_create"))
        if any(w in q for w in ["‡πÄ‡∏û‡∏¥‡πà‡∏°", "add","part","‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤"]):
            return format_answer(get_answer_by_intent("price_list_add_part"))
        if any(w in q for w in ["‡πÅ‡∏Å‡πâ", "‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç", "‡∏õ‡∏£‡∏±‡∏ö", "‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô", "edit","modify","change"]):
            return format_answer(get_answer_by_intent("price_list_edit"))
        if any(w in q for w in ["‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤", "customer"]):
            return format_answer(get_answer_by_intent("price_list_check_customer"))
        if any(w in q for w in ["‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞", "status","‡∏ä‡πà‡∏ß‡∏á‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà","date range"]):
            return format_answer(get_answer_by_intent("price_list_check_status"))
        if any(w in q for w in ["export", "‡∏û‡∏¥‡∏°‡∏û‡πå","print"]):
            return format_answer(get_answer_by_intent("price_list_export"))
        if any(w in q for w in ["‡∏õ‡∏±‡∏ç‡∏´‡∏≤", "issue","problem","error","trouble","‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î"]):
            return format_answer(get_answer_by_intent("price_list_issue"))
    # ===== BOM CHECK STATUS LOGIC (‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏Ñ‡∏∏‡∏¢‡∏ï‡πà‡∏≠‡πÄ‡∏ô‡∏∑‡πà‡∏≠‡∏á) =====
    if current_topic == "bom_check_status":
        if any(w in q for w in ["‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö", "check","‡∏î‡∏π","view","status","‡πÄ‡∏ä‡πá‡∏Ñ","‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞","‡∏ï‡∏£‡∏ß‡∏à"]):
            return format_answer(get_answer_by_intent("bom_check_status"))
        if any(w in q for w in ["approve", "‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥", "‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥‡πÅ‡∏•‡πâ‡∏ß", "‡∏ú‡πà‡∏≤‡∏ô", "‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥‡πÑ‡∏õ", "‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥‡πÄ‡∏™‡∏£‡πá‡∏à"]):
            return format_answer(get_answer_by_intent("bom_check_approved"))
        if any(w in q for w in ["‡∏£‡∏≠‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥", "pending","‡∏£‡∏≠"]):
            return format_answer(get_answer_by_intent("bom_check_pending"))
        if any(w in q for w in ["‡πÑ‡∏°‡πà‡∏ú‡πà‡∏≤‡∏ô", "reject", "issue", "‡∏õ‡∏±‡∏ç‡∏´‡∏≤", "‡πÑ‡∏°‡πà‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥"]):
            return format_answer(get_answer_by_intent("bom_check_rejected"))
        if any(w in q for w in ["revision", "‡πÅ‡∏Å‡πâ‡πÄ‡∏û‡∏¥‡πà‡∏°", "‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡πÄ‡∏û‡∏¥‡πà‡∏°", "‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏°",  "‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡πÉ‡∏´‡∏°‡πà"]):
            return format_answer(get_answer_by_intent("bom_check_revision"))
    # ===== PROFORMA INVOICE LOGIC (‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏Ñ‡∏∏‡∏¢‡∏ï‡πà‡∏≠‡πÄ‡∏ô‡∏∑‡πà‡∏≠‡∏á) =====
    if current_topic == "proforma_invoice":
        if any(w in q for w in ["‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö", "check","‡∏î‡∏π","view","status","‡πÄ‡∏ä‡πá‡∏Ñ","‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞","‡∏ï‡∏£‡∏ß‡∏à"]):
            return format_answer(get_answer_by_intent("finance_pi_check"))
        if any(w in q for w in ["‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥", "approve","‡∏ú‡πà‡∏≤‡∏ô"]):
            return format_answer(get_answer_by_intent("finance_pi_approve"))
        if any(w in q for w in ["‡∏õ‡∏è‡∏¥‡πÄ‡∏™‡∏ò", "reject","‡πÑ‡∏°‡πà‡∏ú‡πà‡∏≤‡∏ô"]):
            return format_answer(get_answer_by_intent("finance_pi_reject"))
        if any(w in q for w in ["‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞", "status"]):
            return format_answer(get_answer_by_intent("finance_pi_status"))
        if any(w in q for w in ["‡∏õ‡∏±‡∏ç‡∏´‡∏≤", "issue","problem","error","trouble","‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î"]):
            return format_answer(get_answer_by_intent("finance_pi_issue"))
    # ===== SALES ORDER LOGIC (‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏Ñ‡∏∏‡∏¢‡∏ï‡πà‡∏≠‡πÄ‡∏ô‡∏∑‡πà‡∏≠‡∏á) =====
    if current_topic == "sales_order":
        if any(w in q for w in ["‡πÄ‡∏õ‡∏¥‡∏î", "create","new","‡∏™‡∏£‡πâ‡∏≤‡∏á"]):
            return format_answer(get_answer_by_intent("erp_so_create"))
        if any(w in q for w in ["‡πÅ‡∏Å‡πâ", "edit","modify","change","‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç"]):
            return format_answer(get_answer_by_intent("erp_so_edit"))
        if any(w in q for w in ["‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö", "check","‡∏î‡∏π","view","status","‡πÄ‡∏ä‡πá‡∏Ñ","‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞","‡∏ï‡∏£‡∏ß‡∏à"]):
            return format_answer(get_answer_by_intent("erp_so_status"))
        if any(w in q for w in ["‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å", "cancel","void","‡∏•‡∏ö","‡∏ñ‡∏≠‡∏ô"]):
            return format_answer(get_answer_by_intent("erp_so_cancel"))
        if any(w in q for w in ["‡∏õ‡∏±‡∏ç‡∏´‡∏≤", "issue","problem","error","trouble","‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î"]):
            return format_answer(get_answer_by_intent("erp_so_common_issue"))

    # ===== RMA LOGIC (‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏Ñ‡∏∏‡∏¢‡∏ï‡πà‡∏≠‡πÄ‡∏ô‡∏∑‡πà‡∏≠‡∏á) =====
    if current_topic == "rma":
        if any(w in q for w in ["‡∏™‡∏£‡πâ‡∏≤‡∏á", "create","new","‡∏™‡∏£‡πâ‡∏≤‡∏á"]):
            return format_answer(get_answer_by_intent("sales_rma_create"))
        if any(w in q for w in ["‡∏™‡πà‡∏á‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥", "submit for approval","‡∏™‡πà‡∏á‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥"]):
            return format_answer(get_answer_by_intent("sales_rma_submit_approval"))
        if any(w in q for w in ["‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö", "check","‡∏î‡∏π","view","status","‡πÄ‡∏ä‡πá‡∏Ñ","‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞","‡∏ï‡∏£‡∏ß‡∏à"]):
            return format_answer(get_answer_by_intent("sales_rma_status"))
        if any(w in q for w in ["‡∏£‡∏±‡∏ö‡∏Ñ‡∏∑‡∏ô", "receive returned goods","‡∏£‡∏±‡∏ö‡∏Ñ‡∏∑‡∏ô‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤"]):
            return format_answer(get_answer_by_intent("sales_rma_receive_goods"))
        if any(w in q for w in ["‡∏õ‡∏¥‡∏î", "close","complete","‡∏õ‡∏¥‡∏î"]):
            return format_answer(get_answer_by_intent("sales_rma_close"))
        if any(w in q for w in ["‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å", "cancel","void","‡∏•‡∏ö","‡∏ñ‡∏≠‡∏ô"]):
            return format_answer(get_answer_by_intent("sales_rma_cancel"))
        if any(w in q for w in ["‡∏õ‡∏±‡∏ç‡∏´‡∏≤", "issue","problem","error","trouble","‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î"]):
            return format_answer(get_answer_by_intent("sales_rma_issue"))
    # ===== CUSTOMER COMPLAINT LOGIC (‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏Ñ‡∏∏‡∏¢‡∏ï‡πà‡∏≠‡πÄ‡∏ô‡∏∑‡πà‡∏≠‡∏á) =====
    if current_topic == "customer_complaint":
        if any(w in q for w in ["‡∏™‡∏£‡πâ‡∏≤‡∏á", "create","new","‡∏™‡∏£‡πâ‡∏≤‡∏á","‡∏£‡πâ‡∏≠‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô","complaint","‡∏£‡πâ‡∏≠‡∏á‡∏ó‡∏∏‡∏Å‡∏Ç‡πå","complain"]):
            return format_answer(get_answer_by_intent("sales_complaint_create"))
        if any(w in q for w in ["‡πÅ‡∏Å‡πâ", "edit","modify","change","‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç"]):
            return format_answer(get_answer_by_intent("sales_complaint_edit"))
        if any(w in q for w in ["‡πÅ‡∏ô‡∏ö","attach","‡πÑ‡∏ü‡∏•‡πå","‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£"]):
            return format_answer(get_answer_by_intent("sales_complaint_attach_evidence"))
        if any(w in q for w in ["‡∏™‡πà‡∏á‡∏™‡∏≠‡∏ö‡∏™‡∏ß‡∏ô", "submit for investigation","‡∏™‡πà‡∏á‡∏™‡∏≠‡∏ö‡∏™‡∏ß‡∏ô"]):
            return format_answer(get_answer_by_intent("sales_complaint_submit_investigation"))
        if any(w in q for w in ["‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö", "check","‡∏î‡∏π","view","status","‡πÄ‡∏ä‡πá‡∏Ñ","‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞","‡∏ï‡∏£‡∏ß‡∏à"]):
            return format_answer(get_answer_by_intent("sales_complaint_status"))
        if any(w in q for w in ["‡∏õ‡∏¥‡∏î", "close","complete","‡∏õ‡∏¥‡∏î"]):
            return format_answer(get_answer_by_intent("sales_complaint_close"))
        if any(w in q for w in ["‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å", "cancel","void","‡∏•‡∏ö","‡∏ñ‡∏≠‡∏ô"]):
            return format_answer(get_answer_by_intent("sales_complaint_cancel"))
    # ===== WARRANTY LOGIC (‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏Ñ‡∏∏‡∏¢‡∏ï‡πà‡∏≠‡πÄ‡∏ô‡∏∑‡πà‡∏≠‡∏á) =====
    if current_topic == "Warehouse & Delivery_root":
        if any(w in q for w in ["‡∏ï‡∏£‡∏ß‡∏à‡∏ô‡∏±‡∏ö‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤,‡∏ï‡∏£‡∏ß‡∏à‡∏ô‡∏±‡∏ö‡∏™‡∏ï‡πá‡∏≠‡∏Å,‡∏ô‡∏±‡∏ö‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏Ñ‡∏á‡∏Ñ‡∏•‡∏±‡∏á,‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏ï‡πá‡∏≠‡∏Å‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤","stock count","inventory count","stock take"]):
            return format_answer(get_answer_by_intent("wh_stock_count"))
        if any(w in q for w in ["‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏ú‡∏•‡∏ï‡∏£‡∏ß‡∏à‡∏ô‡∏±‡∏ö", "‡∏Å‡∏£‡∏≠‡∏Å‡∏ú‡∏•‡∏ï‡∏£‡∏ß‡∏à‡∏ô‡∏±‡∏ö","‡∏•‡∏á‡∏¢‡∏≠‡∏î‡∏ï‡∏£‡∏ß‡∏à‡∏ô‡∏±‡∏ö‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤","stock count record","‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏ú‡∏•‡∏ï‡∏£‡∏ß‡∏à‡∏ô‡∏±‡∏ö","‡∏Å‡∏£‡∏≠‡∏Å‡∏ú‡∏•‡∏ï‡∏£‡∏ß‡∏à‡∏ô‡∏±‡∏ö","‡∏•‡∏á‡∏¢‡∏≠‡∏î‡∏ï‡∏£‡∏ß‡∏à‡∏ô‡∏±‡∏ö‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤"]):
            return format_answer(get_answer_by_intent("wh_stock_count_record"))
        if any(w in q for w in ["‡∏õ‡∏£‡∏±‡∏ö‡∏™‡∏ï‡πá‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏Å‡∏≤‡∏£‡∏ï‡∏£‡∏ß‡∏à‡∏ô‡∏±‡∏ö","‡∏õ‡∏£‡∏±‡∏ö‡∏¢‡∏≠‡∏î‡∏Ñ‡∏á‡∏Ñ‡∏•‡∏±‡∏á","‡∏õ‡∏£‡∏±‡∏ö‡∏™‡∏ï‡πá‡∏≠‡∏Å‡∏´‡∏•‡∏±‡∏á‡∏ï‡∏£‡∏ß‡∏à‡∏ô‡∏±‡∏ö","stock adjustment from count","adjust stock from count"]):
            return format_answer(get_answer_by_intent("wh_stock_adjust_from_count"))
        if any(w in q for w in ["‡∏£‡∏±‡∏ö‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤","‡∏ï‡∏±‡πâ‡∏á‡∏£‡∏±‡∏ö‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤","‡∏£‡∏±‡∏ö‡∏Ç‡∏≠‡∏á‡πÄ‡∏Ç‡πâ‡∏≤","receipt ‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤","goods receipt","‡∏ï‡∏±‡πâ‡∏á‡∏£‡∏±‡∏ö‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤","‡∏£‡∏±‡∏ö‡∏Ç‡∏≠‡∏á‡πÄ‡∏Ç‡πâ‡∏≤"]):
            return format_answer(get_answer_by_intent("wh_goods_receipt"))
        if any(w in q for w in ["‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏£‡∏±‡∏ö‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤", "‡πÄ‡∏ä‡πá‡∏Ñ‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£‡∏£‡∏±‡∏ö‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤", "‡∏î‡∏π‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏£‡∏±‡∏ö‡∏Ç‡∏≠‡∏á","goods receipt check","‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏£‡∏±‡∏ö‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤","‡πÄ‡∏ä‡πá‡∏Ñ‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£‡∏£‡∏±‡∏ö‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤","‡∏î‡∏π‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏£‡∏±‡∏ö‡∏Ç‡∏≠‡∏á"]):
            return format_answer(get_answer_by_intent("wh_goods_receipt_check"))
        if any(w in q for w in ["‡∏•‡∏î‡∏´‡∏ô‡∏µ‡πâ", "‡∏Ñ‡∏∑‡∏ô‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤","‡∏ó‡∏≥ credit memo","‡∏•‡∏î‡πÄ‡∏á‡∏¥‡∏ô‡∏•‡∏î‡∏Ç‡∏≠‡∏á","credit memo"]):
            return format_answer(get_answer_by_intent("wh_credit_memo"))
        if any(w in q for w in ["‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£‡∏Ñ‡∏•‡∏±‡∏á‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤", "‡∏î‡∏π‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£ warehouse", "‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£‡∏Ñ‡∏•‡∏±‡∏á‡∏≠‡∏¢‡∏π‡πà‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡πÑ‡∏´‡∏ô", "warehouse document status"]):
            return format_answer(get_answer_by_intent("wh_document_status"))
    # ===== IT MENU LOGIC (‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏Ñ‡∏∏‡∏¢‡∏ï‡πà‡∏≠‡πÄ‡∏ô‡∏∑‡πà‡∏≠‡∏á) =====
    if current_topic == "uom_setup":
        if any(w in q for w in ["‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ uom class","uom class setup","uom class"]):
            return format_answer(get_answer_by_intent("it_uom_class_create"))
        if any(w in q for w in ["‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ uom","uom setup","uom"]):
            return format_answer(get_answer_by_intent("it_uom_create"))
    if current_topic == "part_setup":
        if any(w in q for w in ["‡∏™‡∏£‡πâ‡∏≤‡∏á part","create part","new part"]):
            return format_answer(get_answer_by_intent("it_part_create"))
        if any(w in q for w in ["part class setup","‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ part class","part class"]):
            return format_answer(get_answer_by_intent("it_part_class_setup"))
    if current_topic == "customer_setup":
        if any(w in q for w in ["‡∏™‡∏£‡πâ‡∏≤‡∏á customer","create customer","new customer"]):
            return format_answer(get_answer_by_intent("it_customer_create"))
        if any(w in q for w in ["‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç customer","edit customer","modify customer"]):
            return format_answer(get_answer_by_intent("it_customer_edit"))
    if current_topic == "supplier_setup":
        if any(w in q for w in ["‡∏™‡∏£‡πâ‡∏≤‡∏á supplier","create supplier","new supplier"]):
            return format_answer(get_answer_by_intent("it_supplier_create"))
        if any(w in q for w in ["‡∏™‡∏£‡πâ‡∏≤‡∏á supplier group","create supplier group","new supplier group"]):
            return format_answer(get_answer_by_intent("it_supplier_group_create"))
        if any(w in q for w in ["‡∏Å‡∏≥‡∏´‡∏ô‡∏î supplier price list","set supplier price list","supplier price list"]):
            return format_answer(get_answer_by_intent("it_supplier_pricelist_setup"))
    if current_topic == "purchasing_setup":
        if any(w in q for w in ["‡∏™‡∏£‡πâ‡∏≤‡∏á buyer","create buyer","new buyer"]):
            return format_answer(get_answer_by_intent("it_buyer_create"))
        if any(w in q for w in ["‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ ship via","ship via setup","ship via"]):
            return format_answer(get_answer_by_intent("it_shipvia_setup"))
        if any(w in q for w in ["‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ purchasing terms","purchasing terms setup","purchasing terms"]):
            return format_answer(get_answer_by_intent("it_purchasing_terms_setup"))
        if any(w in q for w in ["‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ incoterm","incoterm setup","incoterm"]):
            return format_answer(get_answer_by_intent("it_incoterm_setup"))
    if current_topic == "user_security":
        if any(w in q for w in ["‡∏™‡∏£‡πâ‡∏≤‡∏á user","create user","new user"]):
            return format_answer(get_answer_by_intent("it_user_create"))
        if any(w in q for w in ["‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô","set user permissions","user permissions"]):
            return format_answer(get_answer_by_intent("it_user_permission"))
    # ===== FINANCE MENU LOGIC (‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏Ñ‡∏∏‡∏¢‡∏ï‡πà‡∏≠‡πÄ‡∏ô‡∏∑‡πà‡∏≠‡∏á) =====
    if current_topic == "finance_ar_customer_setup":
        if any(w in q for w in ["‡∏ï‡∏±‡∏î‡∏à‡∏≥‡∏´‡∏ô‡πà‡∏≤‡∏¢‡∏•‡∏π‡∏Å‡∏´‡∏ô‡∏µ‡πâ","‡∏õ‡∏£‡∏±‡∏ö‡∏õ‡∏£‡∏∏‡∏á‡∏•‡∏π‡∏Å‡∏´‡∏ô‡∏µ‡πâ","write off ar"]):
            return format_answer(get_answer_by_intent("acc_ar_writeoff_adjust"))
        if any(w in q for w in ["‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏•‡∏π‡∏Å‡∏´‡∏ô‡∏µ‡πâ","ar status","‡∏•‡∏π‡∏Å‡∏´‡∏ô‡∏µ‡πâ‡∏≠‡∏¢‡∏π‡πà‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡πÑ‡∏´‡∏ô"]):
            return format_answer(get_answer_by_intent("acc_ar_status_check"))
    if current_topic == "finance_ap_supplier_setup":
        if any(w in q for w in ["‡∏ï‡∏±‡πâ‡∏á‡∏´‡∏ô‡∏µ‡πâ‡∏•‡πà‡∏ß‡∏á‡∏´‡∏ô‡πâ‡∏≤","‡∏ä‡∏≥‡∏£‡∏∞‡∏•‡πà‡∏ß‡∏á‡∏´‡∏ô‡πâ‡∏≤ ap","create ap advance payment","‡∏ï‡∏±‡πâ‡∏á‡∏´‡∏ô‡∏µ‡πâ‡∏•‡πà‡∏ß‡∏á‡∏´‡∏ô‡πâ‡∏≤"]):
            return format_answer(get_answer_by_intent("acc_ap_prepaid_create"))
        if any(w in q for w in ["‡πÉ‡∏ö‡∏°‡∏±‡∏î‡∏à‡∏≥","‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏°‡∏±‡∏î‡∏à‡∏≥","deposit ap","create ap deposit","‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÉ‡∏ö‡∏°‡∏±‡∏î‡∏à‡∏≥","‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÉ‡∏ö‡∏°‡∏±‡∏î‡∏à‡∏≥"]):
            return format_answer(get_answer_by_intent("acc_ap_deposit_create"))
        if any(w in q for w in ["‡πÉ‡∏ö‡∏•‡∏î‡∏´‡∏ô‡∏µ‡πâ ap","credit note ap","‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÉ‡∏ö‡∏•‡∏î‡∏´‡∏ô‡∏µ‡πâ ap","create ap credit note","‡πÉ‡∏ö‡∏•‡∏î‡∏´‡∏ô‡∏µ‡πâ ap"]):
            return format_answer(get_answer_by_intent("acc_ap_credit_note_create"))
        if any(w in q for w in ["‡πÉ‡∏ö‡∏ß‡∏≤‡∏á‡∏ö‡∏¥‡∏•","‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏ß‡∏≤‡∏á‡∏ö‡∏¥‡∏•","billing ap","create ap billing","‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÉ‡∏ö‡∏ß‡∏≤‡∏á‡∏ö‡∏¥‡∏•","‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÉ‡∏ö‡∏ß‡∏≤‡∏á‡∏ö‡∏¥‡∏•","‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏ß‡∏≤‡∏á‡∏ö‡∏¥‡∏•"]):
            return format_answer(get_answer_by_intent("acc_ap_billing_create"))
    if current_topic == "finance_bank_management":
        if any(w in q for w in ["‡∏õ‡∏£‡∏±‡∏ö‡∏õ‡∏£‡∏∏‡∏á‡∏¢‡∏≠‡∏î‡∏ö‡∏±‡∏ç‡∏ä‡∏µ‡∏ò‡∏ô‡∏≤‡∏Ñ‡∏≤‡∏£","bank adjustment entry","‡∏õ‡∏£‡∏±‡∏ö‡∏õ‡∏£‡∏∏‡∏á‡∏¢‡∏≠‡∏î‡∏ö‡∏±‡∏ç‡∏ä‡∏µ"]):
            return format_answer(get_answer_by_intent("acc_bank_adjustment"))
        if any(w in q for w in ["‡πÇ‡∏≠‡∏ô‡πÄ‡∏á‡∏¥‡∏ô‡∏£‡∏∞‡∏´‡∏ß‡πà‡∏≤‡∏á‡∏ò‡∏ô‡∏≤‡∏Ñ‡∏≤‡∏£","bank fund transfer","‡πÇ‡∏≠‡∏ô‡πÄ‡∏á‡∏¥‡∏ô‡∏£‡∏∞‡∏´‡∏ß‡πà‡∏≤‡∏á‡∏ö‡∏±‡∏ç‡∏ä‡∏µ"]):
            return format_answer(get_answer_by_intent("acc_bank_transfer"))
        if any(w in q for w in ["‡∏Å‡∏£‡∏∞‡∏ó‡∏ö‡∏¢‡∏≠‡∏î‡∏ö‡∏±‡∏ç‡∏ä‡∏µ‡∏ò‡∏ô‡∏≤‡∏Ñ‡∏≤‡∏£","bank reconciliation","‡∏Å‡∏£‡∏∞‡∏ó‡∏ö‡∏¢‡∏≠‡∏î‡∏ö‡∏±‡∏ç‡∏ä‡∏µ"]):
            return format_answer(get_answer_by_intent("acc_bank_reconciliation"))
    if current_topic == "finance_vat_setup":
        if any(w in q for w in ["‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô‡∏†‡∏≤‡∏©‡∏µ‡∏ã‡∏∑‡πâ‡∏≠","purchase tax report","report ‡∏†‡∏≤‡∏©‡∏µ‡∏ã‡∏∑‡πâ‡∏≠"]):
            return format_answer(get_answer_by_intent("acc_tax_purchase_report"))
        if any(w in q for w in ["‡∏Å‡∏•‡∏±‡∏ö‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏†‡∏≤‡∏©‡∏µ‡∏ã‡∏∑‡πâ‡∏≠‡∏£‡∏≠‡πÉ‡∏ö‡∏Å‡∏≥‡∏Å‡∏±‡∏ö","reverse purchase tax pending invoice","‡∏Å‡∏•‡∏±‡∏ö‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏†‡∏≤‡∏©‡∏µ‡∏ã‡∏∑‡πâ‡∏≠"]):
            return format_answer(get_answer_by_intent("acc_tax_reverse_input_vat"))
        if any(w in q for w in ["‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏†‡∏≤‡∏©‡∏µ","tax data verification","‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏†‡∏≤‡∏©‡∏µ"]):
            return format_answer(get_answer_by_intent("acc_tax_status_check"))
    if current_topic == "finance_general_ledger_gl":
        if any(w in q for w in ["‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏ö‡∏±‡∏ç‡∏ä‡∏µ‡πÅ‡∏¢‡∏Å‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó","general ledger entry","‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏ö‡∏±‡∏ç‡∏ä‡∏µ"]):
            return format_answer(get_answer_by_intent("acc_gl_entry"))
        if any(w in q for w in ["‡∏õ‡∏£‡∏±‡∏ö‡∏õ‡∏£‡∏∏‡∏á‡∏ö‡∏±‡∏ç‡∏ä‡∏µ‡∏≠‡∏±‡∏ï‡∏£‡∏≤‡πÅ‡∏•‡∏Å‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô","currency revaluation","‡∏õ‡∏£‡∏±‡∏ö‡∏õ‡∏£‡∏∏‡∏á‡∏≠‡∏±‡∏ï‡∏£‡∏≤‡πÅ‡∏•‡∏Å‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô"]):
            return format_answer(get_answer_by_intent("acc_gl_currency_revaluation"))
        if any(w in q for w in ["‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ö‡∏±‡∏ç‡∏ä‡∏µ‡πÅ‡∏¢‡∏Å‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó","general ledger data verification","‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ö‡∏±‡∏ç‡∏ä‡∏µ"]):
            return format_answer(get_answer_by_intent("acc_gl_status_check"))
    if current_topic == "finance_journal_entry":
        if any(w in q for w in ["‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏™‡∏°‡∏∏‡∏î‡∏£‡∏≤‡∏¢‡∏ß‡∏±‡∏ô‡∏ó‡∏±‡πà‡∏ß‡πÑ‡∏õ","journal entry","‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏™‡∏°‡∏∏‡∏î‡∏£‡∏≤‡∏¢‡∏ß‡∏±‡∏ô"]):
            return format_answer(get_answer_by_intent("acc_journal_create"))
        if any(w in q for w in ["‡∏Å‡∏•‡∏±‡∏ö‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏†‡∏≤‡∏©‡∏µ‡∏ã‡∏∑‡πâ‡∏≠‡∏£‡∏≠‡πÉ‡∏ö‡∏Å‡∏≥‡∏Å‡∏±‡∏ö","reverse purchase tax pending invoice","‡∏Å‡∏•‡∏±‡∏ö‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏†‡∏≤‡∏©‡∏µ‡∏ã‡∏∑‡πâ‡∏≠"]):
            return format_answer(get_answer_by_intent("acc_journal_reverse_vat"))
        if any(w in q for w in ["‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö / Post ‡∏™‡∏°‡∏∏‡∏î‡∏£‡∏≤‡∏¢‡∏ß‡∏±‡∏ô","post journal entry","post ‡∏™‡∏°‡∏∏‡∏î‡∏£‡∏≤‡∏¢‡∏ß‡∏±‡∏ô"]):
            return format_answer(get_answer_by_intent("acc_journal_post_check"))
    # ===== HR MENU LOGIC (‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏Ñ‡∏∏‡∏¢‡∏ï‡πà‡∏≠‡πÄ‡∏ô‡∏∑‡πà‡∏≠‡∏á) =====
    if current_topic == "hr_material_requisition":
        if any(w in q for w in ["‡πÄ‡∏ö‡∏¥‡∏Å","‡πÄ‡∏ö‡∏¥‡∏Å‡∏Ç‡∏≠‡∏á‡∏¢‡∏±‡∏á‡πÑ‡∏á", "‡πÄ‡∏ö‡∏¥‡∏Å‡∏ß‡∏±‡∏™‡∏î‡∏∏‡∏™‡∏¥‡πâ‡∏ô‡πÄ‡∏õ‡∏•‡∏∑‡∏≠‡∏á", "‡∏Ç‡∏≠‡πÄ‡∏ö‡∏¥‡∏Å‡∏Ç‡∏≠‡∏á", "‡πÄ‡∏ö‡∏¥‡∏Å‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå", "request material","material requisition","request item","request equipment"]):
            return format_answer(get_answer_by_intent("hr_issue_material"))
        if any(w in q for w in ["‡∏Ñ‡∏∑‡∏ô","‡∏Ñ‡∏∑‡∏ô‡∏Ç‡∏≠‡∏á‡∏¢‡∏±‡∏á‡πÑ‡∏á", "‡∏£‡∏±‡∏ö‡∏Ñ‡∏∑‡∏ô‡∏ß‡∏±‡∏™‡∏î‡∏∏", "‡∏Ñ‡∏∑‡∏ô‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå", "‡∏Ñ‡∏∑‡∏ô‡∏Ç‡∏≠‡∏á‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏ï‡πá‡∏≠‡∏Å", "return material","return item","return equipment"]):
            return format_answer(get_answer_by_intent("hr_return_material"))
    if current_topic == "hr_item_stock_check":
        if any(w in q for w in ["‡∏ï‡∏£‡∏ß‡∏à","‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö stock item","check stock item","stock item check","‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤", "‡∏î‡∏π‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤", "‡πÄ‡∏ä‡πá‡∏Ñ‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤"]):
            return format_answer(get_answer_by_intent("hr_check_item"))
        if any(w in q for w in ["‡πÄ‡∏ä‡πá‡∏Ñ‡∏™‡∏ï‡πá‡∏≠‡∏Å", "‡∏î‡∏π‡∏¢‡∏≠‡∏î‡∏Ñ‡∏á‡πÄ‡∏´‡∏•‡∏∑‡∏≠", "‡∏™‡∏ï‡πá‡∏≠‡∏Å‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡πÄ‡∏ó‡πà‡∏≤‡πÑ‡∏´‡∏£‡πà","check stock","check inventory","stock check","‡πÄ‡∏ä‡πá‡∏Ñ"]):
            return format_answer(get_answer_by_intent("hr_check_stock"))
    if current_topic == "hr_transfer_item":
        if any(w in q for w in ["‡πÇ‡∏≠‡∏ô‡∏¢‡πâ‡∏≤‡∏¢‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤","item transfer","transfer item","‡πÇ‡∏≠‡∏ô‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤","‡∏¢‡πâ‡∏≤‡∏¢"]):
            return format_answer(get_answer_by_intent("hr_transfer_item"))

    
        
        
    
    



    
    


    # FAQ / FUZZY
    for d, a in zip(documents, answers):
        if q == d or fuzzy(q, d):
            return format_answer(a)

    # RAG
    result = collection.query(
        query_embeddings=model.encode([q]).tolist(),
        n_results=1,
        include=["distances", "metadatas"]
    )

    if result["metadatas"][0]:
        score = 1 - result["distances"][0][0]
        if score >= RAG_THRESHOLD:
            return format_answer(result["metadatas"][0][0]["answer"])

    return format_answer(
        "‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡∏ô‡∏µ‡πâ‡∏ñ‡∏π‡∏Å‡∏™‡πà‡∏á‡πÉ‡∏´‡πâ‡πÄ‡∏à‡πâ‡∏≤‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà IT ‡πÅ‡∏•‡πâ‡∏ß\n"
        "‡∏à‡∏∞‡∏°‡∏µ‡∏Å‡∏≤‡∏£‡∏õ‡∏£‡∏±‡∏ö‡∏õ‡∏£‡∏∏‡∏á‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö‡πÉ‡∏ô‡∏†‡∏≤‡∏¢‡∏´‡∏•‡∏±‡∏á üôè"
    )
